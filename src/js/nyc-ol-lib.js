!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=80)}([function(t){t.exports=jQuery},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(4)),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.container=(0,i.default)(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"getContainer",value:function(){return this.container}},{key:"find",value:function(t){return this.getContainer().find(t)}},{key:"append",value:function(t){return this.getContainer().append((0,i.default)(t))}}]),e}();e.default=s},function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(32));i.default.defs("EPSG:2263","+proj=lcc +lat_1=41.03333333333333 +lat_2=40.66666666666666 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000.0000000001 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=ft +to_meter=0.3048006096012192 +no_defs"),i.default.defs("EPSG:6539","+proj=lcc +lat_1=40.66666666666666 +lat_2=41.03333333333333 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000 +y_0=0 +ellps=GRS80 +units=us-ft +no_defs"),t.proj4=i.default;var a={inherits:function(t,e){a.copyFromParentProperties(t.prototype,e.prototype)},subclass:function(t,e){var n=Object.getPrototypeOf(e);a.copyFromParentProperties(t,n),a.copyFromParentKeys(t,e)},mixin:function(t,e){e.forEach(function(e){r.default.extend(t,e)})},copyFromParentProperties:function(t,e){Object.getOwnPropertyNames(e).forEach(function(n){n in t||(t[n]=e[n])})},copyFromParentKeys:function(t,e){Object.keys(e).forEach(function(n){n in t||(t[n]=e[n])})},capitalize:function(t){var e="";return t.split(" ").forEach(function(t){var n=t.toLowerCase();e+=n.substr(0,1).toUpperCase(),e+=n.substr(1).toLowerCase(),e+=" "}),e.trim()},nextId:function(t){var e=a.uniqueIds[t];return a.uniqueIds[t]="number"==typeof e?e+1:0,t+"-"+a.uniqueIds[t]},html:function(t){if("function"==typeof t.html)return(0,r.default)(t.html());var e=(0,r.default)('<div class="nyc-html"></div>');return t.getProperties?t=t.getProperties():t.properties&&(t=t.properties),Object.keys(t).forEach(function(n){e.append('<div><span class="fld">'+n+'</span><span class="val">'+t[n]+"</span></div>")}),e},loading:function(t){t.hasClass("loading")&&t.append((0,r.default)("#loading").get(0)||a.LOADING_HTML)},ready:function(t){(0,r.default)(t||(0,r.default)("body")).removeClass("loading").attr("aria-hidden",!1),(0,r.default)("#loading").fadeOut()},uniqueIds:{},LOADING_HTML:'<div id="loading"><div><svg xmlns="http://www.w3.org/2000/svg" width="152" height="52"><g transform="translate(1.5,0)"><polygon points="15.5,1.2 3.1,1.2 0,4.3 0,47.7 3.1,50.8 15.5,50.8 18.6,47.7 18.6,35.3 34.1,50.8 46.6,50.8 49.7,47.7 49.7,4.3 46.6,1.2 34.1,1.2 31,4.3 31,16.7 "/><polygon points="83.8,47.7 83.8,38.4 99.3,22.9 99.3,10.5 99.3,4.3 96.2,1.2 83.8,1.2 80.7,4.3 80.7,10.5 74.5,16.7 68.3,10.5 68.3,4.3 65.2,1.2 52.8,1.2 49.7,4.3 49.7,22.9 65.2,38.4 65.2,47.7 68.3,50.8 80.7,50.8 "/><polygon points="145.9,29.1 130.4,29.1 130.4,32.2 118,32.2 118,19.8 130.4,19.8 130.4,22.9 145.9,22.9 149,19.8 149,10.5 139.7,1.2 108.6,1.2 99.3,10.5 99.3,41.5 108.6,50.8 139.7,50.8 149,41.5 149,32.2 "/></g></svg><h1>maps.nyc.gov</h1></div></div>'};(0,r.default)(document).ready(function(){a.loading((0,r.default)("body"))}),e.default=a}).call(this,n(5))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(o(n(2)),o(n(4))),a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.geocoder=t.geocoder,n.projection=t.projection||"EPSG:3857",n.hookupEvents(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"metersPerUnit",value:function(){return proj4.defs[this.projection].to_meter}},{key:"accuracyDistance",value:function(t){return"EPSG:3857"===this.projection?t:t/this.metersPerUnit()}},{key:"search",value:function(t){this.geocoder.search(t)}},{key:"locate",value:function(){throw"Not implemented"}},{key:"track",value:function(){throw"Not implemented"}},{key:"proxyEvent",value:function(t){this.trigger(t.type,t)}},{key:"hookupEvents",value:function(){this.geocoder.on("geocoded",this.proxyEvent,this),this.geocoder.on("ambiguous",this.proxyEvent,this),this.geocoder.on("error",this.proxyEvent,this)}}]),e}();a.Options,a.Accuracy={HIGH:0,MEDIUM:50,LOW:500,ZIP_CODE:1e3},a.Result,a.Ambiguous,e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.evtHdlrs={}}return o(t,[{key:"on",value:function(t,e,n){this.addHdlr(t,e,n)}},{key:"one",value:function(t,e,n){this.addHdlr(t,e,n,!0)}},{key:"trigger",value:function(t,e){var n=this.evtHdlrs[t],o=[];n&&(n.forEach(function(t){t.scope?t.handler.call(t.scope,e):t.handler(e),t.remove&&o.push(t)}),o.forEach(function(t){n.splice(r.default.inArray(t,n),1)}))}},{key:"off",value:function(t,e,n){var o=this.evtHdlrs[t];o.forEach(function(t,r){if(t.handler===e&&t.scope===n)return o.splice(r,1),!1})}},{key:"addHdlr",value:function(t,e,n,o){this.evtHdlrs[t]=this.evtHdlrs[t]||[],this.evtHdlrs[t].push({handler:e,scope:n,remove:o})}}]),t}();i.Handler,e.default=i},function(t){var e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=function(e){function n(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e.target));return t.nycTranslateInstance=o,o.defaultLanguage=e.defaultLanguage||"en",o.button=e.button,o.languages=e.languages,o.hints=[],o.namedCodes={},o.code="",o.messages=e.messages,o.defaultMessages=null,o.messages&&(!o.messages[o.defaultLanguage]&&(o.defaultLanguage=o.defaultLang()),!o.messages[o.defaultLanguage]&&(o.defaultLanguage="en"),o.defaultMessages=o.messages[o.defaultLanguage]),o.code=o.defaultLanguage,o.render(e.target),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default),r(n,[{key:"translate",value:function(t){var e=this,n=(0,i.default)(t.target).val();this.code=n,Object.keys(this.defaultMessages).forEach(function(t){var o=(e.messages[n]||e.defaultMessages)[t]||e.defaultMessages[t];(0,i.default)("."+t).html(o),(0,i.default)('*[data-msg-key="'+t+'"]').each(function(t,e){(0,i.default)(e).attr((0,i.default)(e).data("msg-attr"),o)})}),this.css("translated"),this.trigger("change",this)}},{key:"lang",value:function(){return this.code}},{key:"getCookieValue",value:function(){return""}},{key:"render",value:function(t){var e=this,o=[],r=(0,i.default)(n.HTML);(0,i.default)(t).append(r),Object.keys(this.languages).forEach(function(t){var n=e.languages[t].code,r=(0,i.default)("<option></option>").attr("value",n).html(e.languages[t].native);e.find("select").append(r),o.push(t),e.hints.push(e.languages[t].hint),e.namedCodes[n]=t}),this.codes=o.toString(),(0,i.default)("body").addClass("lang-en"),this.find("select").change(i.default.proxy(this.translate,this)),this.selectDefault(),this.showHint(),this.button&&(0,i.default)("#lng").addClass("button"),this.trigger("ready",this)}},{key:"css",value:function(t){var e=(0,i.default)("body");this.codes.split(",").forEach(function(t){e.removeClass("lang-"+t)}),e[this.code===this.defaultLanguage?"removeClass":"addClass"](t),e.addClass("lang-"+this.code),e.addClass(t)}},{key:"defaultLang",value:function(){return navigator.language.split("-")[0]}},{key:"selectDefault",value:function(){var t=this.defaultLang(),e=this.getCookieValue(),n=[],o=[];Object.values(this.languages).forEach(function(r){var i=r.code;0===e.indexOf(i)?n.push(i):0===e.indexOf(t)&&o.push(i)});var r=n[0]||o[0]||"en";this.find("select").val(this.languages[r].code).trigger("change")}},{key:"showHint",value:function(){var t=this;if(!this.button){var e=this.hints,n=0;setInterval(function(){t.find(".hint").html(e[n]||"Translate"),++n===e.length&&(n=0)},1e3)}}}]),n}();s.Options,s.Choice,s.Choices,s.DEFAULT_LANGUAGES={en:{code:"en",name:"English",native:"English",hint:"Translate"},ar:{code:"ar",name:"Arabic",native:"&#x627;&#x644;&#x639;&#x631;&#x628;&#x64A;&#x629;",hint:"&#x62A;&#x631;&#x62C;&#x645;"},bn:function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({code:"bn",name:"Bengali",native:"&#x9AC;&#x9BE;&#x999;&#x9BE;&#x9B2;&#x9BF;",hint:"&#x9AC;&#x9BE;&#x999;&#x9BE;&#x9B2;&#x9BF;"},"hint","&#x985;&#x9A8;&#x9C1;&#x9AC;&#x9BE;&#x9A6; &#x995;&#x9B0;&#x9BE;"),cn:{code:"cn",name:"Chinese",native:"&#x4E2D;&#x56FD;",hint:"&#x7FFB;&#x8BD1;"},fr:{code:"fr",name:"French",native:"Fran&#231;ais",hint:"Traduire"},ht:{code:"ht",name:"Hatian",native:"Krey&#242;l Ayisyen",hint:"Tradui"},ko:{code:"ko",name:"Korean",native:"&#xD55C;&#xAD6D;&#xC758;",hint:"&#xBC88;&#xC5ED;"},ru:{code:"ru",name:"Russian",native:"P&#x443;&#x441;&#x441;&#x43A;&#x438;&#x439;",hint:"&#x43F;&#x435;&#x440;&#x435;&#x432;&#x435;&#x441;&#x442;&#x438;"},es:{code:"es",name:"Spanish",native:"Espa&#241;ol",hint:"Traducir"},ur:{code:"ur",name:"Urdu",native:"&#x627;&#x631;&#x62F;&#x648;",hint:"&#x62A;&#x631;&#x62C;&#x645;&#x6C1; &#x6A9;&#x631;&#x6CC;&#x6BA;"}},s.HTML='<div id="lng"><button class="btn-sq rad-all"><span class ="hint notranslate">Translate</span><select class="notranslate" translate="no" title="Translate..." araia-label="Translate..."></select></button><div id="lng-goog"></div></div>',e.default=s}).call(this,n(5))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=(o(n(3)),o(n(13))),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,i.default)(e.HTML)));return(0,i.default)(t).append(n.getContainer()),n.isAddrSrch=!0,n.input=null,n.list=null,n.retention=null,n.clear=null,n.autoComplete=null,n.input=n.find(".srch input"),n.list=n.find(".srch ul"),n.retention=n.find("ul.retention"),n.clear=n.find(".srch .btn-x"),n.hookupEvents(n.input),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"zoom",value:function(){throw"Not implemented"}},{key:"featureAsLocation",value:function(){throw"Not implemented"}},{key:"val",value:function(t){return"string"==typeof t&&(this.input.val(t),this.clearBtn()),this.input.val()}},{key:"disambiguate",value:function(t){var e=this,n=t.possible;if(n.length){var o=this.list;this.emptyList(),n.forEach(function(t){o.append(e.listItem({layerName:"addr"},t))}),this.showList(!0)}}},{key:"setFeatures",value:function(t){var e=this;this.autoComplete=this.autoComplete||new s.default,t.nameField=t.nameField||"name",t.displayField=t.displayField||t.nameField,t.placeholder&&this.input.attr("placeholder",t.placeholder),this.sortAlphapetically(t).forEach(function(n){var o=e.featureAsLocation(n,t),r=e.listItem(t,o);e.retention.append(r)}),this.emptyList()}},{key:"removeFeatures",value:function(t){this.find("li."+t).remove()}},{key:"sortAlphapetically",value:function(t){var e=[];return t.features.forEach(function(t){t.get?e.push(i.default.extend({},t)):e.push(i.default.extend({get:function(t){return this.properties[t]}},t))}),e.sort(function(e,n){var o=t.nameField;return e.get(o)<n.get(o)?-1:e.get(o)>n.get(o)?1:0}),e}},{key:"listItem",value:function(t,e){var n=(0,i.default)("<li></li>"),o=t.displayField;return n.addClass(t.layerName),"addr"!==t.layerName&&n.addClass("feature"),n.addClass("notranslate").attr("translate","no").html(e.data[o]||e.name).data("nameField",t.nameField).data("displayField",o).data("location",e).click(i.default.proxy(this.disambiguated,this))}},{key:"emptyList",value:function(){this.retention.append(this.find(".srch li")),this.list.empty()}},{key:"disambiguated",value:function(t){var e=(0,i.default)(t.target);"LI"!==e.get(0).tagName.toUpperCase()&&(e=e.parent());var n=e.data("location");this.val(n.name),n.isFeature=e.hasClass("feature"),this.trigger("disambiguated",n),e.parent().slideUp(),this.emptyList()}},{key:"listClick",value:function(t){if(t=t.originalEvent||t,"block"===this.list.css("display")){var e=(0,i.default)(t.target);i.default.contains(this.list.get(0),e.get(0))?this.autoComplete&&e.trigger("click"):this.list.slideUp()}}},{key:"hookupEvents",value:function(t){t.on("keyup change",i.default.proxy(this.key,this)),t.focus(function(){return t.select()}),this.find(".btn-z-in, .btn-z-out").click(i.default.proxy(this.zoom,this)),this.find(".btn-geo").click(i.default.proxy(this.geolocate,this)),this.clear.click(i.default.proxy(this.clearTxt,this)),(0,i.default)(document).mouseup(i.default.proxy(this.listClick,this))}},{key:"key",value:function(t){13===t.keyCode&&this.isAddrSrch?(this.triggerSearch(),this.list.slideUp()):this.filterList(),this.clearBtn()}},{key:"clearTxt",value:function(){this.val(""),this.clearBtn()}},{key:"clearBtn",value:function(){this.clear[this.val()?"show":"hide"]()}},{key:"filterList",value:function(){var t=this.val().trim();this.autoComplete&&t?this.autoComplete.filter(this.retention,this.list,t):this.emptyList(),this.showList(!1)}},{key:"showList",value:function(t){var e=this;this.list.slideDown(function(){t&&e.list.children().first().attr("tabindex",0).focus()})}},{key:"geolocate",value:function(){this.val(""),this.trigger("geolocate")}},{key:"triggerSearch",value:function(){var t=this.val().trim();t.length&&(this.input.blur(),this.trigger("search",t))}}]),e}();u.FeatureSearchOptions,u.HTML='<div class="z-srch" role="toolbar"><div class="srch" role="search"><input class="rad-all" placeholder="Search for an address..."><button class="btn-rnd btn-x"><span class="screen-reader-only">Clear</span></button><ul class="rad-all"></ul></div><button class="btn-z-in btn-sq rad-all" data-zoom-incr="1" title="Zoom in"><span class="screen-reader-only">Zoom in</span></button><button class="btn-z-out btn-sq rad-all" data-zoom-incr="-1" title="Zoom out"><span class="screen-reader-only">Zoom out</span></button><button class="btn-geo btn-sq rad-all" title="Current location"><span class="screen-reader-only">Current location</span></button><ul class="retention"></ul></div>',e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return n.getContainer().append((0,i.default)(e.HTML)).addClass("tabs"),n.btns=n.find(".btns"),n.tabs=n.find(".container"),n.active=null,n.ready=!1,n.render(t.tabs),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"open",value:function(t){t=this.find(t),this.find(".btns h3, .tab").removeClass("active").not(".tab").attr("aria-pressed",!1),t.addClass("active"),t.data("btn").addClass("active").attr("aria-pressed",!0),this.active=t,this.trigger("change",this)}},{key:"render",value:function(t){var n=this,o=!1;t.forEach(function(t,r){var a=(0,i.default)(t.tab).addClass("tab tab-"+r),s=(0,i.default)(e.BTN_HTML).append(t.title).click(i.default.proxy(n.btnClick,n)).addClass("btn-tab btn-"+r).data("tab",a);a.data("btn",s),n.btns.append(s),n.tabs.append(a),t.active&&(n.open(a),o=!0)}),o||this.open(t[0].tab),this.ready=!0}},{key:"btnClick",value:function(t){this.open((0,i.default)(t.currentTarget).data("tab"))}}]),e}();s.Options,s.Tab,s.HTML='<div class="btns" role="tablist"></div><div class="container" role="tabpanel"></div>',s.BTN_HTML='<h3 class="btn" role="tab"><span class="screen-reader-only">show </span></h3>',e.default=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,i.default)(e.HTML)));return(0,i.default)("body").append(n.getContainer().addClass(t)),n.okBtn=n.find(".btn-ok"),n.yesNoBtns=n.find(".btn-yes, .btn-no"),n.inputBtns=n.find(".btn-submit, .btn-cancel"),n.field=n.find("input"),n.msg=n.find(".dia-msg"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"ok",value:function(t){this.buttons(e.Type.OK,t),this.show(e.Type.OK,t),this.okBtn.focus();var n=this,o=this.okBtn;return new Promise(function(t){o.one("click",function(){n.hide(),t(!0)})})}},{key:"input",value:function(t){var n=this.field;this.buttons(e.Type.INPUT,t),n.attr("placeholder",t.placeholder||""),this.show(e.Type.INPUT,t),n.focus();var o=this,r=this.inputBtns;return new Promise(function(t){var e=function(e){o.hndlKey(t,o,e)};(0,i.default)(document).keyup(e),r.one("click",function(r){var a=(0,i.default)(r.target).hasClass("btn-cancel");(0,i.default)(document).off("keyup",e),o.hide(),t(a?void 0:n.val())})})}},{key:"yesNo",value:function(t){this.buttons(e.Type.YES_NO,t),this.show(e.Type.YES_NO,t),this.find(".btn-yes").focus();var n=this,o=this.yesNoBtns;return new Promise(function(t){o.one("click",function(e){n.hide(),t((0,i.default)(e.target).hasClass("btn-yes"))})})}},{key:"yesNoCancel",value:function(t){this.buttons(e.Type.YES_NO_CANCEL,t),this.show(e.Type.YES_NO_CANCEL,t),this.find(".btn-yes").focus();var n=this,o=this.yesNoBtns,r=this.find(".btn-cancel");return new Promise(function(t){var e=function(e){n.hndlKey(t,n,e)};(0,i.default)(document).keyup(e),o.one("click",function(o){(0,i.default)(document).off("keyup",e),n.hide(),t((0,i.default)(o.target).hasClass("btn-yes"))}),r.one("click",function(){(0,i.default)(document).off("keyup",e),n.hide(),t(void 0)})})}},{key:"buttons",value:function(t,n){var o=n.buttonText||[],r=n.buttonHref||[];t===e.Type.OK?this.find(".btn-ok").html(o[0]||"OK").attr("href",r[0]||"#"):t===e.Type.INPUT?(this.find(".btn-submit").html(o[0]||"Submit").attr("href",r[0]||"#"),this.find(".btn-cancel").html(o[1]||"Cancel").attr("href",r[1]||"#")):t===e.Type.YES_NO?(this.find(".btn-yes").html(o[0]||"Yes").attr("href",r[0]||"#"),this.find(".btn-no").html(o[1]||"No").attr("href",r[1]||"#")):t===e.Type.YES_NO_CANCEL&&(this.find(".btn-yes").html(o[0]||"Yes").attr("href",r[0]||"#"),this.find(".btn-no").html(o[1]||"No").attr("href",r[1]||"#"),this.find(".btn-cancel").html(o[2]||"Cancel").attr("href",r[2]||"#"))}},{key:"show",value:function(t,n){this.currentType=t,this.getContainer().removeClass("dia-3-btns"),this.find(".ui-link").removeClass("ui-link"),this.inputBtns.css("display",t===e.Type.INPUT?"inline-block":"none"),this.field.css("display",t===e.Type.INPUT?"block":"none"),this.okBtn.css("display",t===e.Type.OK?"inline-block":"none"),this.yesNoBtns.css("display",t===e.Type.YES_NO?"inline-block":"none"),t===e.Type.YES_NO_CANCEL&&(this.getContainer().addClass("dia-3-btns"),this.yesNoBtns.css("display","inline-block"),this.find(".btn-cancel").css("display","inline-block")),this.msg.html(n.message),this.getContainer().fadeIn()}},{key:"hide",value:function(){var t=this.field;this.getContainer().fadeOut(function(){t.val("")})}},{key:"hndlKey",value:function(t,e,n){13===n.keyCode&&(0,i.default)(n.target).get(0)===e.field.get(0)?(e.hide(),t(e.field.val())):27===n.keyCode&&(e.hide(),t(void 0))}}]),e}();s.Type={OK:"ok",YES_NO:"yes-no",YES_NO_CANCEL:"yes-no-cancel",INPUT:"input"},s.Options,s.HTML='<div class="dia-container" role="dialog"><div class="dia"><div class="dia-msg"></div><input class="rad-all"><div class="dia-btns"><a class="btn rad-all btn-ok">OK</a><a class="btn rad-all btn-yes">Yes</a><a class="btn rad-all btn-no">No</a><a class="btn rad-all btn-submit">OK</a><a class="btn rad-all btn-cancel">Cancel</a></div></div></div>',e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"replace",value:function(t,e){return Object.keys(e).forEach(function(n){t=t.replace(new RegExp("\\$\\{"+n+"\\}","g"),void 0===e[n]?"":e[n])}),t}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(4)),i=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),o(e,[{key:"search",value:function(){throw"Not implemented"}}]),e}();e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"directions",value:function(e){var n={jsonpacket:this.jsonpacket(e),rand:this.randomParamCopiedFromMtaCode()},o=$.param(n);window.open().document.write(t.JUMP_PAGE.replace(/%QSTR%/,o))}},{key:"jsonpacket",value:function(t){return JSON.stringify(this.insanifyRequest(t))}},{key:"randomParamCopiedFromMtaCode",value:function(){return Math.floor(11*Math.random())}},{key:"now",value:function(){var t=new Date,e=t.getHours();return{date:t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear(),hour:13>e?e:e-12,minute:t.getMinutes(),ampm:12>e?"am":"pm"}}},{key:"insanifyLocation",value:function(t){var e=proj4(t.projection||"EPSG:3857","EPSG:4326",t.coordinate);return e[1]+"$"+e[0]+"$"+t.name+"$0"}},{key:"insanifyRequest",value:function(t){var e=t.origin,n=t.destination,o=(t.projection,this.now());return{RequestDevicename:"DESKTOP",OriginInput:e.name,DestinationInput:n.name,Arrdep:"D",Hour:o.hour,Minute:o.minute,Ampm:o.ampm,InputDate:o.date,Minimize:"X",Walkdist:"0.50",Mode:"FRBC12",LineStart:"",LineEnd:"",Accessible:t.accessible?"Y":"N",OriginCoordinates:this.insanifyLocation(e),DestinationCoordinates:this.insanifyLocation(n),LocationType:"",StartServiceType:"train",StartTrainType:"subway",StartBorough:"",EndBorough:"",Walkincrease:"",Maxinitialwait:"",Maxtriptime:"",Maxtransfers:""}}}]),t}();o.Location,o.SaneRequest,o.InsaneRequest,o.JUMP_PAGE='<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>Redirecting to MTA TripPlanner...</title><style>body, html {padding: 0;margin: 0;}#container {position: fixed;left: 0;top: 0;bottom: 0;right: 0;padding: 0 20px;background-size: 100px;background-position: center 10px;background-repeat: no-repeat;background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22512%22%20height%3D%22512%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E.st0%7Bfill%3A%230039A6%3B%7D.st1%7Bfill%3A%23fff%3B%7D.st2%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-width%3A5%3Bstroke-linecap%3Around%3B%7D%3C%2Fstyle%3E%3Cg%20transform%3D%22translate(28.11026%2C6)%22%3E%3Cpath%20class%3D%22st0%22%20d%3D%22M%200.4%2C106.9%20C%2045.6%2C42.3%20120.6%2C0%20205.4%2C0%20c%20138.1%2C0%20250%2C111.9%20250%2C250%200%2C138.1%20-111.9%2C250%20-250%2C250%20C%20124%2C500%2051.6%2C461%206%2C400.8%22%2F%3E%3Cpath%20class%3D%22st1%22%20d%3D%22m%2034%2C395.8%20c%200%2C0%200%2C-87.4%20-0.8%2C-97.3%200%2C-9.5%20-4.7%2C-64.2%20-3.7%2C-73.4%20l%202.6%2C0.1%2032.8%2C165.3%2045.9%2C-8.1%2026.7%2C-153.1%20c%200.8%2C0%202.2%2C0%203%2C0%201.4%2C9.4%20-2.4%2C53.8%20-2.4%2C63.3%20-0.8%2C9.9%20-0.8%2C85%20-0.8%2C85%20l%2046.5%2C-8.1%200%2C-230.5%20-72.6%2C-12.6%20-20.4%2C141.2%20C%2090.1%2C267.6%2070.2%2C119.2%2070.2%2C119.2%20L%200%2C107%205.7%2C400.8%22%2F%3E%3Cpolygon%20class%3D%22st1%22%20points%3D%22329.4%2C321.1%20351.8%2C318.2%20354.7%2C339.6%20380.9%2C335.1%20355.8%2C169.2%20324.6%2C163.8%20293%2C350.5%20326.3%2C344.6%22%2F%3E%3Cpolygon%20class%3D%22st1%22%20points%3D%22195.9%2C200.5%20231.1%2C203.6%20231.2%2C361.2%20274.2%2C353.7%20274.2%2C207.4%20302%2C209.7%20302%2C159.5%20195.9%2C141.1%22%2F%3E%3Cpolygon%20class%3D%22st0%22%20points%3D%22339.4%2C225.6%20334.4%2C281.2%20347.3%2C280.4%20342.5%2C225.6%22%2F%3E%3Cpath%20class%3D%22st2%22%20d%3D%22M%200.4%2C106.9%20C%2045.6%2C42.3%20120.6%2C0%20205.4%2C0%20c%20138.1%2C0%20250%2C111.9%20250%2C250%200%2C138.1%20-111.9%2C250%20-250%2C250%20C%20124%2C500%2051.6%2C461%206%2C400.8%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");}body * {font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;font-size: 24px;font-weight: bold;color: #0039A6;}h1 {margin: 120px 0 -6px 0;overflow: hidden;}button {background-color: rgba(181,181,181,.1);border: 1px solid rgb(221,221,221);border-radius: 3px;margin: 120px auto 0 auto;padding: 10px;height: auto;width: auto;display: block;}button:hover {background-color: rgba(181,181,181,.3);}#msg, h2 {text-align: center;}#msg {display: none;}iframe {visibility: hidden;}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.js"><\/script><head><body><div id="container"><button onclick="redirect();">Click to be redirected to the MTA TripPlanner</button><h1 id="msg" onclick="redirect();">Redirecting to the MTA TripPlanner<br>&bull;</h1><h2>Depending on your browser settings you may be required to reenter your trip information</h2></div><script>var REQUEST_URL = "http://tripplanner.mta.info/MyTrip/handler/customplannerHandler.ashx?";var RESPONSE_URL = "http://tripplanner.mta.info/MyTrip/ui_web/customplanner/results.aspx";function redirect(){$("button").hide();var msg = $("#msg").show();var iframe = $("<iframe></iframe>");setInterval(function(){msg.html(msg.html() + "&bull;");}, 300);$("#container").append(iframe);iframe.load(function(){document.location = RESPONSE_URL;});iframe.attr("src", REQUEST_URL + "%QSTR%");};<\/script></body></html>',e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,[{key:"filter",value:function(t,e,n){var o=this,i=3<n.length,a=6<n.length,s={exact:[],possible:[]},u=this.regexp(n),l=[],c=this.test;r.default.merge((0,r.default)(e).find("li"),(0,r.default)(t).find("li")).each(function(t,e){l.push((0,r.default)(e)),c(u,(0,r.default)(e),s,i,o.log)}),(0,r.default)(t).append(l),s.exact.length?(0,r.default)(e).prepend(s.exact):!a&&(0,r.default)(e).prepend(s.possible)}},{key:"test",value:function(t,e,n,o){var r=e.html();o&&t.exact.test(r)&&n.exact.push(e),t.possible.test(r)&&n.possible.push(e)}},{key:"regexp",value:function(t){for(var e=new String(t.replace(/[^a-zA-Z0-9]/g,"")),n=new String(t.replace(/[^a-zA-Z0-9 ]/g,"")),o="^",r=0;r<e.length;r++)o+="(?=.*"+e.charAt(r)+")|";return o=o.substr(0,o.length-1),o+=".*$",{exact:new RegExp("("+n+")","i"),possible:new RegExp(o,"i")}}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=(function(t){t&&t.__esModule}(n(3)),function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,[{key:"zoomLocation",value:function(){throw"Not implemented"}},{key:"setLocation",value:function(){throw"Not implemented"}}]),t}());r.ZOOM_LEVEL=17,e.default=r},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(2)),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"canDownload",value:function(){return"download"in(0,i.default)("<a></a>").get(0)}},{key:"saveGeoJson",value:function(t,e){var n="data:application/jsoncharset=utf-8,"+encodeURIComponent(e),o=(0,i.default)('<a class="file-dwn"><img></a>');(0,i.default)("body").append(o),o.attr("href",n).attr("download",t).find("img").trigger("click"),o.remove()}},{key:"setItem",value:function(t,e){"localStorage"in window&&localStorage.setItem(t,e)}},{key:"getItem",value:function(t){if("localStorage"in window)return localStorage.getItem(t)}},{key:"removeItem",value:function(t){if("localStorage"in window)return localStorage.removeItem(t)}},{key:"readTextFile",value:function(t,e){var n=new FileReader;if(n.onload=function(){t(n.result)},e)n.readAsText(e);else{var o=(0,i.default)('<input class="file-in" type="file">');(0,i.default)("body").append(o),o.change(function(t){o.remove(),n.readAsText(t.target.files[0])}),o.trigger("click")}}},{key:"loadGeoJsonFile",value:function(t,e,n){var o=this;this.readTextFile(function(n){var r=o.addToMap(t,n);e&&e(r)},n)}},{key:"loadShapeFile",value:function(t,e,n){if(n)this.getShpDbfPrj(t,n,e);else{var o=this,r=(0,i.default)('<input class="file-in" type="file" multiple>');(0,i.default)("body").append(r),r.change(function(n){o.getShpDbfPrj(t,n.target.files,e),r.remove()}),r.trigger("click")}}},{key:"getShpDbfPrj",value:function(t,e,n){var o,r,i,a=this;Object.values(e).forEach(function(t){var e=t.name,n=e.substr(e.length-4).toLowerCase();".shp"===n?o=t:".dbf"===n?r=t:".prj"===n&&(i=t)}),o?this.readPrj(i,function(e){a.readShpDbf(t,o,r,e,n)}):n&&n()}},{key:"readPrj",value:function(t,e){t?this.readTextFile(e,t):e()}},{key:"readShpDbf",value:function(t,e,n,o,r){var i,a,s=this,u=new FileReader;u.onload=function(e){i=e.target.result,(a||!n)&&s.readShp(t,i,a,o,r)};var l=new FileReader;l.onload=function(e){a=e.target.result,i&&s.readShp(t,i,a,o,r)},u.readAsArrayBuffer(e),n&&l.readAsArrayBuffer(n)}},{key:"readShp",value:function(e,n,o,r,i){var a=this,s=[];t.shapefile.open(n,o).then(function(t){t.read().then(function n(o){if(!o.done)return s.push(o.value),t.read().then(n);var u=a.addToMap(e,s,r);i&&i(u)})}).catch(function(t){console.error(t)})}},{key:"addToMap",value:function(){throw"Not implemented"}},{key:"customProj",value:function(t){if(t){var e=a.default.nextId("shp:prj");return proj4.defs(e,t),e}}}]),t}();s.shapefile=n(31),e.default=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return n.getContainer().append(e.HTML),n.btn=n.find("h3").append(t.title).click(i.default.proxy(n.toggle,n)),n.content=n.find(".content").append((0,i.default)(t.content)),t.collapsed&&(n.content.hide(),n.btn.removeClass("rad-top"),n.find("h3 button").addClass("expd")),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"toggle",value:function(){var t="none"===this.content.css("display"),e=this.btn;t?this.content.slideDown(function(){e.addClass("rad-top")}):this.content.slideUp(function(){e.removeClass("rad-top")}),this.find("h3 button").toggleClass("expd")}}]),e}();s.Options,s.HTML='<div class="clps rad-all"><h3 class="btn rad-all rad-top" role="button"><button class="btn-rnd"><span class="screen-reader-only">show/hide</span></button></h3><div class="content rad-bot"></div></div>',e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),r={hookupEvents:function(t){(0,o.default)(t).on("drop",o.default.proxy(this.loadLayer,this)),(0,o.default)(t).on("dragover",function(t){t.preventDefault()})},loadLayer:function(t){var e=t.originalEvent.dataTransfer;if(t.preventDefault(),t.stopPropagation(),e&&e.files.length){var n=e.files;"json"===n[0].name.split(".").pop().toLowerCase()?this.storage.loadGeoJsonFile(this,null,n[0]):this.storage.loadShapeFile(this,null,n)}},sortedPhotos:function(){var t=this,e=[];return Object.keys(this.photos).forEach(function(n){e.push(t.photos[n])}),e.sort(function(t,e){var n=t.name||t.get("name");return(e.name||e.get("name")).substr(0,4)-n.substr(0,4)})},LabelType:{BASE:"base",PHOTO:"photo"}};e.default=r},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(6)),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.default.getScript("https://translate.google.com/translate_a/element.js?cb=nycTranslateInstance.init"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"init",value:function(){nycTranslateInstance.goog=new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:nycTranslateInstance.codes,layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:!1},"lng-goog"),nycTranslateInstance.hack(),nycTranslateInstance.trigger("ready",nycTranslateInstance)}},{key:"translate",value:function(t){var e=(0,i.default)("iframe.goog-te-menu-frame:first").contents().find(".goog-te-menu2-item span.text");if(clearTimeout(nycTranslateInstance.timeout),t&&e.length){var n=this.languages[(0,i.default)(t.target).val()].name;"English"===n?this.showOriginalText():(0,i.default)(e).each(function(t,e){if((0,i.default)(e).text()===n)return(0,i.default)(e).trigger("click"),!1}),this.code=this.namedCodes[n]||"en",this.css("goog-tranlated"),this.trigger("change",this)}else nycTranslateInstance.timeout=setTimeout(function(){nycTranslateInstance.translate(t)},200)}},{key:"getCookieValue",value:function(){var t=this.getCookie();return t?t=(t=t.split("/"))[2]:""}},{key:"getCookie",value:function(){for(var t,e=document.cookie.split(";"),n=0;n<e.length;n++){for(t=e[n];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf("googtrans="))return t.substring(10,t.length)}}},{key:"hack",value:function(){(0,i.default)("input[placeholder]").each(function(t,e){var n=(0,i.default)(e).next();if(n.hasClass("lng-placeholder")){n.find("font");var o=n.html();i.default.each(n.find("font"),function(t,e){o=(0,i.default)(e).html()}),(0,i.default)(e).attr("placeholder",o)}else(0,i.default)(e).after('<span class="lng-placeholder">'+(0,i.default)(e).attr("placeholder")+"</span>")}),(0,i.default)("body").css("top","auto"),(0,i.default)("#goog-gt-tt").remove(),setTimeout(i.default.proxy(this.hack,this),200)}},{key:"showOriginalText",value:function(){var t=this,e=(0,i.default)("iframe.goog-te-banner-frame:first");(0,i.default)(e.contents().find(".goog-te-button button")).each(function(e,n){if("Show original"===(0,i.default)(n).text()){var o=t.find("select").val();return(0,i.default)(n).trigger("click"),"English"!==t.languages[o].name&&t.find("select").val("en"),!1}})}}]),e}();e.default=s},function(t,e,n){n(29),t.exports=self.fetch.bind(self)},function(t,e,n){(function(e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return"function"==typeof t}function o(){var t=setTimeout;return function(){return t(r,1)}}function r(){for(var t=0;t<C;t+=2){(0,P[t])(P[t+1]),P[t]=void 0,P[t+1]=void 0}C=0}function i(t,e){var n=this,o=new this.constructor(s);void 0===o[L]&&m(o);var r=n._state;if(r){var i=arguments[r-1];O(function(){return b(r,o,i,n._result)})}else h(n,o,t,e);return o}function a(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(s);return c(e,t),e}function s(){}function u(t){try{return t.then}catch(t){return F.error=t,F}}function l(e,n,o){n.constructor===e.constructor&&o===i&&n.constructor.resolve===a?function(t,e){e._state===A?d(t,e._result):e._state===M?p(t,e._result):h(e,void 0,function(e){return c(t,e)},function(e){return p(t,e)})}(e,n):o===F?(p(e,F.error),F.error=null):void 0===o?d(e,n):t(o)?function(t,e,n){O(function(t){var o=!1,r=function(t,e,n,o){try{t.call(e,n,o)}catch(e){return e}}(n,e,function(n){o||(o=!0,e===n?d(t,n):c(t,n))},function(e){o||(o=!0,p(t,e))},t._label);!o&&r&&(o=!0,p(t,r))},t)}(e,n,o):d(e,n)}function c(t,e){t===e?p(t,new TypeError("You cannot resolve a promise with itself")):function(t){var e=typeof t;return null!==t&&("object"==e||"function"==e)}(e)?l(t,e,u(e)):d(t,e)}function f(t){t._onerror&&t._onerror(t._result),y(t)}function d(t,e){t._state!==S||(t._result=e,t._state=A,0!==t._subscribers.length&&O(y,t))}function p(t,e){t._state!==S||(t._state=M,t._result=e,O(f,t))}function h(t,e,n,o){var r=t._subscribers,i=r.length;t._onerror=null,r[i]=e,r[i+A]=n,r[i+M]=o,0===i&&t._state&&O(y,t)}function y(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var o=void 0,r=void 0,i=t._result,a=0;a<e.length;a+=3)o=e[a],r=e[a+n],o?b(n,o,r,i):r(i);t._subscribers.length=0}}function b(e,n,o,r){var i,a,s,u,l=t(o);if(l){if((i=function(t,e){try{return t(e)}catch(e){return F.error=e,F}}(o,r))===F?(u=!0,a=i.error,i.error=null):s=!0,n===i)return void p(n,new TypeError("A promises callback cannot return that same promise."))}else i=r,s=!0;n._state!==S||(l&&s?c(n,i):u?p(n,a):e===A?d(n,i):e===M&&p(n,i))}function m(t){t[L]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var g,v,w,_=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},C=0,O=function(t,e){P[C]=t,P[C+1]=e,2==(C+=2)&&(v?v(r):w())},k="undefined"==typeof window?void 0:window,E=k||{},T=E.MutationObserver||E.WebKitMutationObserver,j="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),x="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,P=Array(1e3);w=j?function(){return e.nextTick(r)}:T?function(){var t=0,e=new T(r),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():x?function(){var t=new MessageChannel;return t.port1.onmessage=r,function(){return t.port2.postMessage(0)}}():void 0!==k?o():function(){try{var t=Function("return this")().require("vertx");return void 0===(g=t.runOnLoop||t.runOnContext)?o():function(){g(r)}}catch(t){return o()}}();var S,L=Math.random().toString(36).substring(2),A=1,M=2,F={error:null},D=0,B=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(s),this.promise[L]||m(this.promise),_(e)?(this.length=e.length,this._remaining=e.length,this._result=Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&d(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===S&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,o=n.resolve;if(o===a){var r=u(t);if(r===i&&t._state!==S)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===N){var c=new n(s);l(c,t,r),this._willSettleAt(c,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(o(t),e)},t.prototype._settledAt=function(t,e,n){var o=this.promise;o._state===S&&(this._remaining--,t===M?p(o,n):this._result[e]=n),0===this._remaining&&d(o,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;h(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(M,e,t)})},t}(),N=function(){function t(e){this[L]=D++,this._result=this._state=void 0,this._subscribers=[],s!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){c(t,e)},function(e){p(t,e)})}catch(e){p(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},t}();return N.prototype.then=i,N.all=function(t){return new B(this,t).promise},N.race=function(t){var e=this;return _(t)?new e(function(n,o){for(var r=t.length,i=0;i<r;i++)e.resolve(t[i]).then(n,o)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},N.resolve=a,N.reject=function(t){var e=new this(s);return p(e,t),e},N._setScheduler=function(t){v=t},N._setAsap=function(t){O=t},N._asap=O,N.polyfill=function(){var t;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var o=null;try{o=Object.prototype.toString.call(e.resolve())}catch(e){}if("[object Promise]"===o&&!e.cast)return}t.Promise=N},N.Promise=N,N})}).call(this,n(30),n(5))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=o(n(10));n(20).polyfill(),n(19);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target)),o=n;return fetch(t.url||"./manifest.webmanifest").then(function(t){return t.json()}).then(function(t){t.url=document.location.href,o.append((new s.default).replace(e.HTML,t)),o.hookupEvents()}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"hookupEvents",value:function(){var t=this.find(".btns");this.find(".btn-shr").click(function(e){e.stopPropagation(),t.fadeToggle(function(){(0,i.default)("*").one("click",function(e){e.stopPropagation(),1==1*t.css("opacity")&&t.fadeOut()})})})}}]),e}();u.Options,u.HTML='<div class="shr"><a class="btn-shr btn-sq rad-all" role="button" title="Share..."><span class="screen-reader-only">Share...</span></a><div class="btns"><a class="btn-sq rad-all facebook" role="button" href="https://www.facebook.com/sharer/sharer.php?u=${url}" target="_blank" rel="noopener noreferrer" title="Facebook"><span class="screen-reader-only">Facebook</span></a><a class="btn-sq rad-all twitter" role="button" href="https://twitter.com/intent/tweet?text=${url} @nycgov&source=webclient" target="_blank" rel="noopener noreferrer" title="Twitter"><span class="screen-reader-only">Twitter</span></a><a class="btn-sq rad-all google" role="button" href="https://plus.google.com/share?url=${url}" target="_blank" rel="noopener noreferrer" title="Google+"><span class="screen-reader-only">Google+</span></a><a class="btn-sq rad-all linkedin" role="button" href="http://www.linkedin.com/shareArticle?mini=true&url=${url}" target="_blank" rel="noopener noreferrer" title="LinkedIn"><span class="screen-reader-only">LinkedIn</span></a><a class="btn-sq rad-all tumblr" role="button" href="http://www.tumblr.com/share/link?url=${url}&name=${name}&description=via%20NYC.gov" target="_blank" rel="noopener noreferrer" title="Tumblr"><span class="screen-reader-only">Tumblr</span></a><a class="btn-sq rad-all email" role="button" href="mailto:?subject=${name}&body=${description}%0A%0A${url}" title="email"><span class="screen-reader-only">Email</span></a></div></div>',e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return n.getContainer().addClass("lst-pg").append((0,i.default)(e.HTML)),n.items=t.items||[],n.list=n.find(".list"),n.index=0,n.pageSize=t.pageSize||10,n.moreBtn=n.find("button").click(i.default.proxy(n.more,n)),n.reset(n.items),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"reset",value:function(t){this.list.empty(),this.items=t,this.index=0,this.moreBtn.fadeIn(),this.next()}},{key:"next",value:function(t){t=t||this.pageSize;var e=this.items.slice(this.index,this.index+t);return this.index+=t,this.index>=this.items.length-1&&this.moreBtn.fadeOut(),this.render(e),e}},{key:"render",value:function(t){var e=this;t.forEach(function(t){e.list.append((0,i.default)('<div class="lst-it" role="listitem"></div>').append(t.html()))})}},{key:"more",value:function(){this.next()}}]),e}();s.Options,s.Item,s.HTML='<div class="list" role="list"></div><button class="btn rad-all btn-more">More...</button>',e.default=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(4)),a=(o(n(3)),o(n(7)),o(n(9))),s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.zoomSearch=t.zoomSearch,n.locator=t.locator,n.mapLocator=t.mapLocator,n.dialog=new a.default,n.autoLocate=t.autoLocate||!1,n.hookupEvents(),n.locateFromQueryString(document.location.search),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"setLocation",value:function(t){this.mapLocator.setLocation(t)}},{key:"hookupEvents",value:function(){this.locator.on("geocoded",this.located,this),this.locator.on("geolocated",this.located,this),this.locator.on("ambiguous",this.ambiguous,this),this.locator.on("error",this.error,this),this.zoomSearch.on("disambiguated",this.located,this),this.zoomSearch.on("search",this.locator.search,this.locator),this.zoomSearch.on("geolocate",this.locator.locate,this.locator)}},{key:"locateFromQueryString",value:function(t){var e={};try{t.substr(1).split("&").forEach(function(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])})}catch(t){}e.address?this.locator.search(e.address):this.autoLocate&&this.locator.locate()}},{key:"located",value:function(t){var e=this;this.zoomSearch.val("geolocated"===t.type?"":t.name),this.mapLocator.zoomLocation(t,function(){e.trigger(t.type,t)})}},{key:"ambiguous",value:function(t){t.possible.length?this.zoomSearch.disambiguate(t):this.dialog.ok({message:"The location you entered was not understood"})}},{key:"error",value:function(){this.dialog.ok({message:"Failed to contact geocoder"})}}]),e}();s.Options,e.default=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=o(n(0)),u=o(n(2)),l=o(n(3)),c=o(n(11)),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.url=t.url+"&input=",n.projection=t.projection||"EPSG:3857",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,c.default),a(e,[{key:"search",value:function(t){if(5!==(t=t.trim()).length||isNaN(t))t.length&&(t=t.replace(/"/g,"").replace(/'/g,"").replace(/&/g," and "),s.default.ajax({url:""+this.url+t,dataType:"jsonp",success:s.default.proxy(this.geoclient,this),error:s.default.proxy(this.error,this)}));else{var n=this.project(e.ZIP_CODE_POINTS[t]);this.trigger(n?"geocoded":"ambiguous",n?{coordinate:n,accuracy:l.default.Accuracy.ZIP_CODE,type:"geocoded",zip:!0,name:t}:{input:t,possible:[]})}}},{key:"project",value:function(t){return t&&"EPSG:2263"!==this.projection?proj4("EPSG:2263",this.projection,t):t}},{key:"geoclient",value:function(t){var e=t.results;if("OK"!==t.status)this.trigger("ambiguous",{type:"ambiguous",input:t.input,possible:[]});else if(1===e.length){var n=e[0],o=this.parse(n);o?(o.type="geocoded",this.trigger("geocoded",o)):this.trigger("ambiguous",{type:"ambiguous",input:t.input,possible:[]})}else this.trigger("ambiguous",{type:"ambiguous",input:t.input,possible:this.possible(e)})}},{key:"possible",value:function(t){var e=this,n=[];return t.forEach(function(t){var o=e.parse(t);o&&n.push(o)}),n}},{key:"parse",value:function(t){var e,n,o,r=t.request.split(" ")[0],i=t.response;if("intersection"===r)e=i.streetName1+" and "+i.streetName2,n=[1*i.xCoordinate,1*i.yCoordinate],o=l.default.Accuracy.MEDIUM;else if("blockface"===r)e=i.firstStreetNameNormalized+" btwn "+i.secondStreetNameNormalized+" & "+i.thirdStreetNameNormalized,n=[(1*i.fromXCoordinate+1*i.toXCoordinate)/2,(1*i.fromYCoordinate+1*i.toYCoordinate)/2],o=l.default.Accuracy.LOW;else{var a=i.internalLabelXCoordinate,s=i.internalLabelYCoordinate;e=(i.houseNumber?i.houseNumber+" ":"")+(i.firstStreetNameNormalized||i.giStreetName1),n=[1*(a&&s?a:i.xCoordinate),1*(a&&s?s:i.yCoordinate)],o=a&&s?l.default.Accuracy.HIGH:l.default.Accuracy.MEDIUM}try{return{type:"geocoded",coordinate:this.project(n),data:i,accuracy:o,name:u.default.capitalize(e.replace(/  /," ").replace(/  /," ")+", "+i.firstBoroughName)+", NY "+(i.zipCode||i.leftSegmentZipCode||"")}}catch(r){console.warn("No coordinate",t)}}},{key:"error",value:function(){console.error("Geoclient error",arguments),this.trigger("error",{type:"error",error:arguments})}}]),e}();f.Options,f.ZIP_CODE_POINTS=(r(i={10474:[1018466,233787],10455:[1007889,236616],10037:[1001661,235627],10024:[991450,225457],10454:[1007449,232863],10026:[997179,231835],10035:[1001886,231364],10025:[993331,230012]},"10035",[1006595,228454]),r(i,"11101",[1001319,211034]),r(i,"11364",[1051553,211923]),r(i,"10018",[984278,215509]),r(i,"10020",[990012,215729]),r(i,"11005",[1064789,214295]),r(i,"10017",[991869,213252]),r(i,"10001",[983613,213360]),r(i,"10011",[982781,210664]),r(i,"10016",[990291,210665]),r(i,"11104",[1006224,210564]),r(i,"11109",[996054,210740]),r(i,"10010",[988989,208515]),r(i,"11367",[1032392,205392]),r(i,"10014",[982449,206620]),r(i,"10003",[987465,205563]),r(i,"11222",[998773,204620]),r(i,"11379",[1017432,200740]),r(i,"11429",[1056859,198057]),r(i,"11435",[1036960,195018]),r(i,"11415",[1031798,197376]),r(i,"11418",[1031001,193330]),r(i,"11433",[1043368,193721]),r(i,"11451",[1039899,194697]),r(i,"11221",[1004438,191873]),r(i,"11421",[1023878,191241]),r(i,"11372",[1016528,213126]),r(i,"11004",[1065606,210363]),r(i,"11040",[1065956,213534]),r(i,"10002",[988242,200171]),r(i,"10314",[939259,155728]),r(i,"11693",[1028661,168843]),r(i,"11228",[980891,164066]),r(i,"11096",[1048547,164406]),r(i,"11693",[1032834,164479]),r(i,"11209",[976172,165379]),r(i,"10304",[962458,165679]),r(i,"10456",[1007883,242372]),r(i,"10472",[1021444,241624]),r(i,"10031",[998088,239814]),r(i,"10039",[1001519,240436]),r(i,"10459",[1013835,240084]),r(i,"10451",[1005368,238290]),r(i,"10473",[1022475,237217]),r(i,"10030",[1000193,237302]),r(i,"10027",[999088,234131]),r(i,"10464",[1047712,250241]),r(i,"10464",[1043291,247861]),r(i,"10461",[1028296,247902]),r(i,"10457",[1012388,247405]),r(i,"10460",[1015132,243510]),r(i,"10032",[1000382,244917]),r(i,"10452",[1005446,244483]),r(i,"11414",[1027256,178677]),r(i,"11231",[979340,182720]),r(i,"11232",[983612,177801]),r(i,"10034",[1005713,255122]),r(i,"10033",[1001707,248780]),r(i,"10462",[1020685,249420]),r(i,"10040",[1003863,251914]),r(i,"10453",[1008152,249805]),r(i,"11102",[1004636,220364]),r(i,"11370",[1014445,217532]),r(i,"10021",[997020,219120]),r(i,"11361",[1047797,217779]),r(i,"11358",[1040709,216377]),r(i,"11362",[1057749,215220]),r(i,"10044",[996385,214347]),r(i,"11369",[1019957,217722]),r(i,"11103",[1008295,217197]),r(i,"11106",[1001397,217519]),r(i,"11368",[1024870,212082]),r(i,"11377",[1010574,210678]),r(i,"10036",[985413,216821]),r(i,"11355",[1033762,213010]),r(i,"10302",[945946,169124]),r(i,"10465",[1031495,239091]),r(i,"11691",[1053783,158810]),r(i,"11096",[1054217,162199]),r(i,"11223",[991665,156781]),r(i,"11693",[1030676,160394]),r(i,"11208",[1019700,184749]),r(i,"11207",[1013544,183721]),r(i,"10004",[978925,190480]),r(i,"10004",[971715,190592]),r(i,"11413",[1053380,183328]),r(i,"11217",[989547,187967]),r(i,"11238",[994291,186584]),r(i,"11231",[983057,186217]),r(i,"11422",[1057272,180607]),r(i,"11420",[1036899,184708]),r(i,"11417",[1027410,185709]),r(i,"11215",[989882,181773]),r(i,"11357",[1036533,225804]),r(i,"10029",[999950,227538]),r(i,"00083",[991590,220538]),r(i,"11356",[1028115,225277]),r(i,"11359",[1046026,228012]),r(i,"10303",[933820,171004]),r(i,"11234",[1004323,163783]),r(i,"11360",[1044984,223892]),r(i,"11105",[1011836,221755]),r(i,"10128",[997765,224257]),r(i,"11371",[1022003,220457]),r(i,"10023",[988765,222068]),r(i,"11363",[1055047,220385]),r(i,"10028",[995910,222872]),r(i,"11354",[1032198,219054]),r(i,"11216",[998312,187241]),r(i,"11416",[1025796,188584]),r(i,"11233",[1006523,186300]),r(i,"11436",[1040697,185554]),r(i,"11213",[1000284,183308]),r(i,"11212",[1008387,180764]),r(i,"11225",[997345,180829]),r(i,"11218",[990799,173649]),r(i,"11226",[995711,174598]),r(i,"11219",[985166,169604]),r(i,"11210",[999101,167896]),r(i,"11230",[993494,166072]),r(i,"11419",[1033365,190202]),r(i,"11434",[1046577,185969]),r(i,"11204",[987887,164576]),r(i,"10471",[1012587,266570]),r(i,"10470",[1024748,268409]),r(i,"10466",[1024313,263999]),r(i,"10467",[1019786,258782]),r(i,"11430",[1043607,175068]),r(i,"11203",[1002509,175950]),r(i,"10469",[1026678,255623]),r(i,"10468",[1013897,258046]),r(i,"10463",[1008780,258696]),r(i,"10458",[1015534,253712]),r(i,"11378",[1009641,202115]),r(i,"10009",[990043,203961]),r(i,"10012",[984832,203596]),r(i,"10013",[982892,201665]),r(i,"10007",[982504,199552]),r(i,"11237",[1004600,197083]),r(i,"11385",[1011367,195195]),r(i,"10038",[983418,197803]),r(i,"11206",[1000221,195003]),r(i,"10006",[980563,197293]),r(i,"11412",[1050773,193231]),r(i,"10005",[981339,197038]),r(i,"11251",[993428,194599]),r(i,"10004",[980174,195435]),r(i,"11411",[1057763,192413]),r(i,"11201",[986968,192156]),r(i,"10004",[972576,193652]),r(i,"11205",[995897,192159]),r(i,"10305",[963310,156060]),r(i,"11229",[999717,158278]),r(i,"11214",[984e3,159330]),r(i,"10306",[950937,145144]),r(i,"11694",[1025530,149310]),r(i,"11224",[984306,149092]),r(i,"10308",[942704,140020]),r(i,"10282",[979981,200244]),r(i,"11211",[999857,199848]),r(i,"11249",[993704,198278]),r(i,"11370",[1016758,227518]),r(i,"10065",[994666,217698]),r(i,"10075",[995301,221633]),r(i,"10069",[987047,221849]),r(i,"10281",[980036,198787]),r(i,"11373",[1017948,208465]),r(i,"10279",[981949,198823]),r(i,"10165",[990124,213288]),r(i,"10168",[990733,212960]),r(i,"10105",[990067,217259]),r(i,"10118",[988212,211939]),r(i,"10176",[990123,214490]),r(i,"10162",[997739,219667]),r(i,"10170",[990955,213470]),r(i,"10112",[989735,215947]),r(i,"10122",[986550,213178]),r(i,"10107",[989098,218425]),r(i,"10103",[990705,216275]),r(i,"10174",[991094,213106]),r(i,"10166",[990733,213798]),r(i,"10169",[990872,214089]),r(i,"10167",[991259,214199]),r(i,"10177",[990927,214381]),r(i,"10172",[991398,214417]),r(i,"10171",[991426,214709]),r(i,"10270",[982060,196710]),r(i,"10104",[990123,216312]),r(i,"10271",[981339,197293]),r(i,"10110",[989486,213943]),r(i,"10175",[989847,214016]),r(i,"10151",[991702,217332]),r(i,"10173",[990040,213907]),r(i,"10178",[990429,212814]),r(i,"10119",[986217,213068]),r(i,"10121",[986439,212486]),r(i,"10123",[986827,213032]),r(i,"10106",[989624,218024]),r(i,"10158",[991177,212122]),r(i,"10041",[981727,195435]),r(i,"10120",[987242,212449]),r(i,"10278",[983113,199880]),r(i,"10155",[993143,216531]),r(i,"10043",[982337,195836]),r(i,"10081",[981838,197074]),r(i,"10096",[989071,214235]),r(i,"10097",[988461,216931]),r(i,"10196",[989237,215e3]),r(i,"10196",[989458,214963]),r(i,"10275",[980368,196382]),r(i,"10265",[982060,196164]),r(i,"10045",[981866,197329]),r(i,"10047",[988047,208660]),r(i,"10047",[988047,208660]),r(i,"10080",[980785,198167]),r(i,"10203",[981062,196965]),r(i,"10259",[981478,197439]),r(i,"10260",[981921,196564]),r(i,"10285",[980147,199224]),r(i,"10286",[981727,196637]),r(i,"10463",[1007644,260043]),r(i,"10475",[1030489,258509]),r(i,"10464",[1036131,258338]),r(i,"10309",[923594,132955]),r(i,"10307",[916899,124411]),r(i,"10280",[979509,197257]),r(i,"10048",[980812,198532]),r(i,"10055",[991564,215802]),r(i,"10019",[989652,217477]),r(i,"10111",[990483,215838]),r(i,"10153",[991896,217478]),r(i,"10154",[991896,215328]),r(i,"10152",[991979,215584]),r(i,"10115",[994299,234675]),r(i,"10022",[993087,215620]),r(i,"11235",[1000973,149936]),r(i,"11693",[1036606,153266]),r(i,"11692",[1041045,155461]),r(i,"11697",[1009230,143240]),r(i,"10312",[935583,136827]),r(i,"11239",[1021573,175899]),r(i,"11236",[1011642,172461]),r(i,"11220",[979421,172519]),r(i,"10301",[961077,172967]),r(i,"10310",[950582,169591]),r(i,"11426",[1060737,207724]),r(i,"11365",[1041364,208618]),r(i,"11001",[1065508,206646]),r(i,"11375",[1026883,201848]),r(i,"11427",[1053373,205042]),r(i,"11374",[1022389,203771]),r(i,"11366",[1039491,203659]),r(i,"11423",[1048812,200621]),r(i,"11428",[1055655,202207]),r(i,"11432",[1041634,200093]),i),e.default=f},function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(1)),s=o(n(8)),u=o(n(12)),l=function(e){function n(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"body"));t.directions=r,r.append(n.HTML),r.map=null,r.tabs=new s.default({target:"#dir-tabs",tabs:[{tab:"#map-tab",title:"Map"},{tab:"#route-tab",title:"Directions"}]}),(0,i.default)(window).resize(i.default.proxy(r.adjustTabs,r)),r.service=null,r.renderer=null,r.args=null,r.modeBtn="#transit",r.url=(e||n.GOOGLE_URL)+"&callback=directions.init",r.routeTarget=r.find("#route-tab div.route"),r.lastDir="",r.styles=o||n.DEFAULT_STYLES,(0,i.default)("#mta").click(i.default.proxy(r.tripPlanHack,r)),(0,i.default)("#mode button").click(i.default.proxy(r.mode,r));var a=(0,i.default)("#fld-from input");return a.keypress(i.default.proxy(r.key,r)).focus(function(){return a.select()}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default),r(n,[{key:"directions",value:function(t){var e=t.mode||"TRANSIT",n=this.url;return this.args=t,this.adjustTabs(),this.map?(t.from=t.from||(0,i.default)("#fld-from input").val(),(0,i.default)("#fld-from input").val(t.from),(0,i.default)("#fld-to").html(t.to),(0,i.default)("#fld-facility").html(t.facility),(0,i.default)("#directions").slideDown(),void(t.from&&this.lastDir!==t.from+"|"+t.to+"|"+e&&(this.lastDir=t.from+"|"+t.to+"|"+e,this.service.route({origin:t.from,destination:t.to,travelMode:google.maps.TravelMode[e]},i.default.proxy(this.handleResp,this))))):void setTimeout(function(){i.default.getScript(n)},200)}},{key:"handleResp",value:function(t,e){if(e===google.maps.DirectionsStatus.OK){var n=t.routes[0].legs[0],o=n.start_address.replace(/\, USA/,""),r=n.end_address.replace(/\, USA/,"");if(!this.args.origin.coordinate){var a=n.start_location;this.args.origin={name:o,coordinate:[a.lng(),a.lat()],projection:"EPSG:4326"}}this.renderer.setOptions({map:this.map,panel:(0,i.default)(this.routeTarget).get(0),directions:t}),(0,i.default)("#fld-from input").val(o),(0,i.default)("#fld-to").html(r)}else(0,i.default)(this.routeTarget).empty();this.trigger("change",{response:t,status:e})}},{key:"init",value:function(){this.map=new google.maps.Map((0,i.default)("#map-tab div.map").get(0),{mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#D3D3D3",panControl:!1,streetViewControl:!1,mapTypeControl:!1,zoomControl:!1,maxZoom:18,styles:this.styles}),this.service=new google.maps.DirectionsService,this.renderer=new google.maps.DirectionsRenderer,this.find(".btn-z-in, .btn-z-out").click(i.default.proxy(this.zoom,this)),this.directions(this.args)}},{key:"adjustTabs",value:function(){var t=1>Math.abs(this.tabs.getContainer().width()-(0,i.default)(window).width());this.args.origin.coordinate&&t?this.tabs.open("#map-tab"):this.tabs.open("#route-tab")}},{key:"zoom",value:function(t){var e=this.map.getZoom()||0;this.map.setZoom(e+1*(0,i.default)(t.target).data("zoom-incr"))}},{key:"mode",value:function(t){this.args=this.args||{},this.modeBtn=t.target,"mta"!==this.modeBtn.id&&((0,i.default)("#mode button").removeClass("active"),(0,i.default)(this.modeBtn).addClass("active"),this.args.mode=(0,i.default)(this.modeBtn).data("mode"),this.directions(this.args))}},{key:"key",value:function(t){13===t.keyCode&&(this.args.from=(0,i.default)("#fld-from input").val(),this.directions(this.args))}},{key:"tripPlanHack",value:function(){this.args.accessible=!0,(new u.default).directions(this.args)}}]),n}();l.DEFAULT_GOOGLE_URL="https://maps.googleapis.com/maps/api/js?&sensor=false&libraries=visualization",l.Request,l.Response,l.HTML='<div id="directions"><button id="back-to-map" class="btn rad-all" onclick="$(\'#directions\').slideUp()">Back to finder</button><div id="dir-tabs"><div id="route-tab"><div class="fld-lbl">From my location:</div><div id="fld-from"><input class="rad-all" placeholder="Enter an address..."></div><div class="fld-lbl">To <span id="fld-facility"></span>:</div><div id="fld-to"></div><table id="mode"><tbody><tr><td><button id="transit" class="btn-sq rad-all active" data-mode="TRANSIT" title="Get transit directions"><span class="screen-reader-only">get transit directions</span></button></td><td><button id="bike" class="btn-sq rad-all" data-mode="BICYCLING" title="Get bicycling directions"><span class="screen-reader-only">get bicycling directions</span></button></td><td><button id="walk" class="btn-sq rad-all" data-mode="WALKING" title="Get walking directions"><span class="screen-reader-only">get walking directions</span></button></td><td><button id="car" class="btn-sq rad-all" data-mode="DRIVING" title="Get driving directions"><span class="screen-reader-only">get driving directions</span></button></td><td><button id="mta" class="btn-sq rad-all">TripPlanner<img class="icon" alt="Get accessible transit directions from the MTA TripPlanner" src="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22656%22%20height%3D%22656%22%3E%3Cg%20transform%3D%22translate(-263.86732%2C-69.7075)%22%20style%3D%22fill%3A%23fff%22%3E%3Cpath%20%20d%3D%22M%20833.556%2C367.574%20C%20825.803%2C359.619%20814.97%2C355.419%20803.9%2C356.025%20l%20-133.981%2C7.458%2073.733%2C-83.975%20c%2010.504%2C-11.962%2013.505%2C-27.908%209.444%2C-42.157%20-2.143%2C-9.764%20-8.056%2C-18.648%20-17.14%2C-24.324%20-0.279%2C-0.199%20-176.247%2C-102.423%20-176.247%2C-102.423%20-14.369%2C-8.347%20-32.475%2C-6.508%20-44.875%2C4.552%20l%20-85.958%2C76.676%20c%20-15.837%2C14.126%20-17.224%2C38.416%20-3.097%2C54.254%2014.128%2C15.836%2038.419%2C17.227%2054.255%2C3.096%20l%2065.168%2C-58.131%2053.874%2C31.285%20-95.096%2C108.305%20c%20-39.433%2C6.431%20-74.913%2C24.602%20-102.765%2C50.801%20l%2049.66%2C49.66%20c%2022.449%2C-20.412%2052.256%2C-32.871%2084.918%2C-32.871%2069.667%2C0%20126.346%2C56.68%20126.346%2C126.348%200%2C32.662%20-12.459%2C62.467%20-32.869%2C84.916%20l%2049.657%2C49.66%20c%2033.08%2C-35.166%2053.382%2C-82.484%2053.382%2C-134.576%200%2C-31.035%20-7.205%2C-60.384%20-20.016%2C-86.482%20l%2051.861%2C-2.889%20-12.616%2C154.75%20c%20-1.725%2C21.152%2014.027%2C39.695%2035.18%2C41.422%201.059%2C0.086%202.116%2C0.127%203.163%2C0.127%2019.806%2C0%2036.621%2C-15.219%2038.257%2C-35.306%20l%2016.193%2C-198.685%20c%200.904%2C-11.071%20-3.026%2C-21.989%20-10.775%2C-29.942%20z%22%2F%3E%3Cpath%20%20d%3D%22m%20762.384%2C202.965%20c%2035.523%2C0%2064.317%2C-28.797%2064.317%2C-64.322%200%2C-35.523%20-28.794%2C-64.323%20-64.317%2C-64.323%20-35.527%2C0%20-64.323%2C28.8%20-64.323%2C64.323%200%2C35.525%2028.795%2C64.322%2064.323%2C64.322%20z%22%2F%3E%3Cpath%20d%3D%22m%20535.794%2C650.926%20c%20-69.668%2C0%20-126.348%2C-56.68%20-126.348%2C-126.348%200%2C-26.256%208.056%2C-50.66%2021.817%2C-70.887%20l%20-50.196%2C-50.195%20c%20-26.155%2C33.377%20-41.791%2C75.393%20-41.791%2C121.082%200%2C108.535%2087.983%2C196.517%20196.518%2C196.517%2045.691%2C0%2087.703%2C-15.636%20121.079%2C-41.792%20L%20606.678%2C629.11%20c%20-20.226%2C13.757%20-44.63%2C21.816%20-70.884%2C21.816%20z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E"></button></td></tr></tbody></table><div class="route"></div></div><div id="map-tab"><div class="map"></div><button class="btn-z-in btn-sq rad-all" data-zoom-incr="1" title="Zoom in"><span class="screen-reader-only">Zoom in</span></button><button class="btn-z-out btn-sq rad-all" data-zoom-incr="-1" title="Zoom out"><span class="screen-reader-only">Zoom out</span></button></div></div></div>',l.DEFAULT_STYLES=[{elementType:"geometry.fill",stylers:[{color:"#ececec"}]},{elementType:"geometry.stroke",stylers:[{color:"#dcdcdc"}]},{elementType:"labels.text.fill",stylers:[{color:"#585858"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#e8e8e8"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#d8d8d8"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.man_made",stylers:[{visibility:"off"}]},{featureType:"transit.line",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.government",stylers:[{visibility:"on"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]}],e.default=l}).call(this,n(5))},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(2)),s=o(n(1)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return n.getContainer().addClass("chc rad-all"),n.radio=t.radio,n.inputs=null,n.choices=t.choices,n.setChoices(n.choices),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"setChoices",value:function(t){var n=this;this.getContainer().empty(),this.radio&&this.getContainer().attr("role","radiogroup"),t.forEach(function(t,o){var r=(0,i.default)(e.HTML),s=a.default.nextId("chc-chc"),u=r.find("input");r.find(".lbl").addClass(n.radio?t.name+"-"+o:t.name),u.attr("id",s).attr("name",t.name).attr("type",n.radio?"radio":"checkbox").prop("checked",t.checked).data("choice",t).change(i.default.proxy(n.change,n)),r.find("label").html(t.label).attr("for",s),n.append(r),n.extend(t)}),this.inputs=this.find("input")}},{key:"val",value:function(t){if(t)return i.default.each(this.inputs,function(e,n){(0,i.default)(n).prop("checked",!1),t.some(function(t){var e=(0,i.default)(n).data("choice");if(t.eq(e))return(0,i.default)(n).prop("checked",!0),!0})}),this.val();var e=[];return i.default.each(this.inputs,function(t,n){(0,i.default)(n).prop("checked")&&e.push((0,i.default)(n).data("choice"))}),e}},{key:"change",value:function(){this.trigger("change",this)}},{key:"extend",value:function(t){i.default.extend(t,{eq:function(t){return this.name===t.name&&this.label===t.label&&JSON.stringify(this.value)===JSON.stringify(t.value)}})}}]),e}();u.Choice,u.Options,u.HTML='<div class="chc-chc"><div><input></div><div class="lbl"><label></label></div></div>',e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t+=""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t+=""),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return h.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(h.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(h.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(h.arrayBuffer&&h.blob&&b(t))this._bodyArrayBuffer=u(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!m(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=Array(e.length),o=0;o<e.length;o++)n[o]=String.fromCharCode(e[o]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t+"";if(this.credentials=e.credentials||this.credentials||"omit",(e.headers||!this.headers)&&(this.headers=new r(e.headers)),this.method=function(t){var e=t.toUpperCase();return-1<g.indexOf(e)?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(r))}}),e}function d(t){var e=new r;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),o=n.shift().trim();if(o){var r=n.join(":").trim();e.append(o,r)}}),e}function p(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&300>this.status,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var h={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(h.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},m=ArrayBuffer.isView||function(t){return t&&-1<y.indexOf(Object.prototype.toString.call(t))};r.prototype.append=function(t,o){t=e(t),o=n(o);var r=this.map[t];this.map[t]=r?r+","+o:o},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,o){this.map[e(t)]=n(o)},r.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),o(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),o(t)},h.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];p.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=c,t.Response=p,t.fetch=function(t,e){return new Promise(function(n,o){var r=new c(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:d(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;n(new p(e,t))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(r.method,r.url,!0),"include"===r.credentials?i.withCredentials=!0:"omit"===r.credentials&&(i.withCredentials=!1),"responseType"in i&&h.blob&&(i.responseType="blob"),r.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"==typeof self?this:self)},function(t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===e||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(){p&&f&&(p=!1,f.length?d=f.concat(d):h=-1,d.length&&i())}function i(){if(!p){var t=o(r);p=!0;for(var e=d.length;e;){for(f=d,d=[];++h<e;)f&&f[h].run();h=-1,e=d.length}f=null,p=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var u,l,c=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:e}catch(t){u=e}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(t){l=n}}();var f,d=[],p=!1,h=-1;c.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||p||o(i)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.prependListener=s,c.prependOnceListener=s,c.listeners=function(){return[]},c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t){t.exports=window.shapefile||{}},function(t){t.exports=window.proj4||{defs:function(){}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}o(n(0));var r=o(n(2)),i=o(n(13)),a=o(n(17)),s=o(n(26)),u=o(n(16)),l=o(n(1)),c=o(n(9)),f=o(n(25)),d=o(n(4)),p=o(n(24)),h=o(n(11)),y=o(n(15)),b=o(n(23)),m=o(n(3)),g=o(n(14)),v=o(n(22)),w=o(n(10)),_=o(n(8)),C=o(n(21)),O=o(n(7)),k=o(n(28)),E=o(n(6)),T=o(n(18)),j=o(n(27)),x=o(n(12));window.nyc=r.default,window.nyc.AutoComplete=i.default,window.nyc.BasemapHelper=a.default,window.nyc.Choice=s.default,window.nyc.Collapsible=u.default,window.nyc.Container=l.default,window.nyc.Dialog=c.default,window.nyc.Directions=f.default,window.nyc.EventHandling=d.default,window.nyc.Geoclient=p.default,window.nyc.Geocoder=h.default,window.nyc.LocalStorage=y.default,window.nyc.LocationMgr=b.default,window.nyc.Locator=m.default,window.nyc.MapLocator=g.default,window.nyc.ListPager=v.default,window.nyc.ReplaceTokens=w.default,window.nyc.Share=C.default,window.nyc.Tabs=_.default,window.nyc.ZoomSearch=O.default,window.nyc.lang=k.default,window.nyc.lang.Translate=E.default,window.nyc.lang.Goog=T.default,window.nyc.mta=j.default,window.nyc.mta.TripPlanHack=x.default},function(t){t.exports=ol.extent},function(t){t.exports=ol.geom.Point},function(t){t.exports=ol.Feature},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(51)),s=o(n(2)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(0,i.default)(t.map.getTargetElement()).find("f-tip").get(0),o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:s.default.nextId("FeatureTip"),element:n||(0,i.default)(e.HTML).get(0)}));return o.setMap(t.map),o.map=o.getMap(),o.tip=(0,i.default)(o.getElement()),o.addTips(t.tips),t.map.on("pointermove",i.default.proxy(o.label,o)),(0,i.default)(t.map.getViewport()).mouseout(i.default.proxy(o.hide,o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"hide",value:function(){this.tip.fadeOut()}},{key:"addTips",value:function(t){t.forEach(function(t){t.layer.nycTip=t.label})}},{key:"label",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return e.getVisible()&&e.nycTip?e.nycTip(t):null});e?(this.tip.html(e.html).addClass(e.css||""),this.setPosition(t.coordinate),this.tip.show(),this.position()):this.hide()}},{key:"position",value:function(){var t=this.map.getSize(),e=this.map.getPixelFromCoordinate(this.getPosition()),n=this.tip.width(),o=this.tip.height(),r=e[1]+o>t[1]?"bottom":"top",i=e[0]+n>t[0]?"right":"left";this.setPositioning(r+"-"+i)}}]),e}();u.TipDef,u.LabelFunction,u.Label,u.Options,u.HTML='<div class="f-tip" role="tooltip"></div>',e.default=u},function(t){t.exports=ol.layer.Vector},function(t){t.exports=ol.source.Vector},function(t){t.exports=ol.format.GeoJSON},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(o(n(0)),o(n(39)));n(20).polyfill(),n(19);var a=function(t){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),t.loader=function(){console.warn("Use autoLoad to load features")};var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.autoLoadOptions=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"autoLoad",value:function(){var t=this,e=this.autoLoadOptions,n=this.getFormat();return new Promise(function(o){fetch(e.url).then(function(t){return t.text()}).then(function(e){var r=n.readFeatures(e);t.addFeatures(r),t.set("autoload-complete",!0),o(r)})})}}]),e}();e.default=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(66)),s=o(n(65)),u=(o(n(2)),o(n(41))),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.allFeatures=t.features||null,n.on("change:autoload-complete",i.default.proxy(n.storeFeatures,n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"filter",value:function(t){var e=[],n={};return this.allFeatures.forEach(function(o){var r=!0;t.every(function(t){return r=-1<i.default.inArray(o.get(t.property),t.values)}),r&&(n[o.getId()]=!0,e.push(o))}),this.clear(!0),this.addFeatures(e),e}},{key:"sort",value:function(t){var n=this,o=this.getFeatures();return o.sort(function(o,r){o.getGeometry(),r.getGeometry();var a=n.distance(t,o.getGeometry()),s=n.distance(t,r.getGeometry());return o.set("__distance",a),r.set("__distance",s),i.default.extend(o,e.DistanceDecoration),i.default.extend(r,e.DistanceDecoration),a.distance<s.distance?-1:a.distance>s.distance?1:0}),o}},{key:"distance",value:function(t,e){var n=new a.default([t,e.getClosestPoint(t)]),o=this.projections(this.getFormat());return o[0]&&n.transform(o[1],o[0]),{distance:n.getLength(),units:o[0]?o[0].getUnits():void 0}}},{key:"projections",value:function(t){var e,n,o=t?t.parentFormat:null;return o?(e=o.defaultDataProjection,n=o.defaultFeatureProjection||"EPSG:3857"):t&&(e=t.defaultDataProjection,n=t.defaultFeatureProjection||"EPSG:3857"),e&&(e=e.getCode?e:new s.default({code:e})),[e,n]}},{key:"storeFeatures",value:function(){this.allFeatures=this.getFeatures()}}]),e}();l.Distance,l.Filter,l.DistanceDecoration={getDistance:function(){return this.get("__distance")}},e.default=l},function(t){t.exports=ol.format.Feature},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(o(n(0)),o(n(2))),a=o(n(36)),s=(o(n(43)),o(n(35)),function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.parentFormat=t.parentFormat,n.decorations=t.decorations,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"readFeature",value:function(){throw"Not supported: Use readFeatures"}},{key:"readFeatures",value:function(t,e){var n=this,o=this.parentFormat.readFeatures(t,e);return o.forEach(function(t){n.decorate(t)}),o}},{key:"getType",value:function(){return this.parentFormat.getType()}},{key:"decorate",value:function(t){t.get("decorated")||(t.set("decorated",!0),i.default.mixin(t,this.decorations),t.extendFeature&&t.extendFeature())}}]),e}());s.Options,e.default=s},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(o(n(0)),o(n(34))),a=(o(n(2)),o(n(67))),s=o(n(53)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.layers=[],n.pager=new a.default({target:n.content}),n.addLayers(t.layers),n.pager.on("change",n.pan,n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"showFeatures",value:function(t,e){e=e||i.default.getCenter(t[0].getGeometry().getExtent()),this.pager.show(t),this.show({coordinate:e})}},{key:"mapClick",value:function(t){var e=this.getId(),n=[];this.map.forEachFeatureAtPixel(t.pixel,function(t,o){o.get("popup-id")===e&&n.push(t)}),n.length&&this.showFeatures(n,t.coordinate)}}]),e}();e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(40)),s=o(n(34)),u=o(n(7)),l=o(n(3)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,i.default)(t.getTargetElement()).find(".ol-overlaycontainer-stopevent")));return n.map=t,n.view=t.getView(),n.geoJson=new a.default,n.getContainer().on("click dblclick mouseover mousemove",function(){(0,i.default)(".feature-tip").hide()}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"featureAsLocation",value:function(t,e){var n=t.getGeometry();return{name:t.getName?t.getName():t.get(e.nameField),coordinate:s.default.getCenter(n.getExtent()),geometry:JSON.parse(this.geoJson.writeGeometry(n)),data:t.getProperties(),type:"geocoded",accuracy:l.default.Accuracy.HIGH}}},{key:"zoom",value:function(t){this.view.animate({zoom:this.view.getZoom()+1*(0,i.default)(t.target).data("zoom-incr")})}}]),e}();e.default=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=(o(n(0)),o(n(40))),a=o(n(69)),s=o(n(68)),u=o(n(39)),l=o(n(38)),c=o(n(36)),f=o(n(35)),d=(o(n(3)),o(n(14))),p=o(n(37)),h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.layer=null,n.source=null,n.map=t.map,n.view=n.map.getView(),n.zoom=void 0===t.zoom?d.default.ZOOM_LEVEL:t.zoom,n.format=new i.default,n.tip=null,n.createLayer(t.style),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,d.default),r(e,[{key:"zoomLocation",value:function(t,e){var n=this.map,o=this.view,r=this.source,i=this.feature(t),a=i.getGeometry();r.clear(),r.addFeature(i),e&&n.once("moveend",e),"Point"===a.getType()?o.animate({center:t.coordinate,zoom:this.zoom}):o.fit(a.getExtent(),{size:n.getSize(),duration:500})}},{key:"setLocation",value:function(t){this.source.clear(),this.source.addFeature(this.feature(t))}},{key:"feature",value:function(t){var e=t.geometry,n=new c.default({name:t.name,isFeature:t.isFeature});return e?n.setGeometry(this.format.readGeometry(e)):n.setGeometry(new f.default(t.coordinate)),n}},{key:"createLayer",value:function(t){this.source=new u.default,this.layer=new l.default({source:this.source,style:t||e.LOCATION_STYLE,zIndex:1e4}),this.map.addLayer(this.layer),this.tip=new p.default({map:this.map,tips:[{layer:this.layer,label:function(t){return{css:"nyc-user-location",html:t.get("name")}}}]})}}]),e}();h.Options,h.LOCATION_STYLE=new a.default({image:new s.default({scale:.09375,size:[1024,1024],src:"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%221024%22%20height%3D%221024%22%3E%3Cfilter%20id%3D%22filter%22%20style%3D%22color-interpolation-filters%3AsRGB%22%20x%3D%22-0.035750399%22%20width%3D%221.0715008%22%20y%3D%22-0.03625311%22%20%20height%3D%221.0725062%22%3E%3CfeGaussianBlur%20stdDeviation%3D%226.0015266%22%2F%3E%3C%2Ffilter%3E%3Cpath%20style%3D%22opacity%3A0.1%3Bfill%3A%23000000%3Bfill-opacity%3A1%3Bstroke%3A%23000000%3Bstroke-width%3A10%3Bstroke-opacity%3A1%3Bfilter%3Aurl(%23filter)%22%20d%3D%22M%20868.91078%2C141.10492%20C%20806.53392%2C79.855774%20695.84806%2C89.539532%20621.70905%2C162.73227%20547.57005%2C235.92501%20492.08486%2C476.05139%20510.9101%2C494.53629%20529.73535%2C513.02119%20773.473%2C457.74384%20847.612%2C384.5511%20921.751%2C311.35836%20931.28764%2C202.35407%20868.91078%2C141.10492%20Z%20M%20645.16036%2C361.99953%20c%20-41.52967%2C-40.77885%20-35.13918%2C-113.58881%2014.19918%2C-162.29746%2049.33837%2C-48.70864%20123.27149%2C-55.19708%20164.80115%2C-14.41823%2041.52967%2C40.77885%2035.13918%2C113.58881%20-14.19918%2C162.29745%20-49.33837%2C48.70864%20-123.27149%2C55.19709%20-164.80115%2C14.41824%20z%22%2F%3E%3Cpath%20style%3D%22fill%3A%23000%3Bstroke%3A%23fff%3Bstroke-width%3A20%22%20d%3D%22m%20512%2C25.6%20c%20-95.4279%2C0%20-172.8%2C77.3721%20-172.8%2C172.8%200%2C95.4279%20144%2C288%20172.8%2C288%2028.8%2C0%20172.8%2C-192.5721%20172.8%2C-288%20C%20684.8%2C102.9721%20607.4279%2C25.6%20512%2C25.6%20Z%20m%200%2C288%20c%20-63.5346%2C0%20-115.2%2C-51.6942%20-115.2%2C-115.2%200%2C-63.5058%2051.6654%2C-115.2%20115.2%2C-115.2%2063.5346%2C0%20115.2%2C51.6942%20115.2%2C115.2%200%2C63.5058%20-51.6654%2C115.2%20-115.2%2C115.2%20z%22%2F%3E%3C%2Fsvg%3E"})}),e.default=h},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=(o(n(2)),o(n(3))),s=o(n(71)),u=o(n(70)),l=o(n(34)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.locating=!1,n.extentLimit=t.extentLimit,n.geolocation=new s.default({trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),n.geolocation.on("change",i.default.proxy(n.geolocationChange,n)),n.geolocation.on("error",i.default.proxy(n.geolocationError,n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"locate",value:function(){this.locating=!0,this.geolocation.setTracking(!0)}},{key:"track",value:function(t){this.geolocation.setTracking(t)}},{key:"geolocationError",value:function(t){console.error(t.message,t)}},{key:"geolocationChange",value:function(){var t=this.geolocation,e=t.getPosition(),n=u.default.toStringHDMS(e);e=proj4("EPSG:4326",this.projection,e),this.withinLimit(e)&&(this.locating&&(this.track(!1),this.locating=!1),this.trigger("geolocated",{coordinate:e,heading:t.getHeading(),accuracy:t.getAccuracy()/this.metersPerUnit(),type:"geolocated",name:n}))}},{key:"withinLimit",value:function(t){return!this.extentLimit||l.default.containsCoordinate(this.extentLimit,t)}}]),e}();c.Options,e.default=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(23)),i=o(n(24)),a=o(n(48)),s=o(n(47)),u=o(n(46)),l=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{zoomSearch:new u.default(t.map),locator:new a.default({geocoder:new i.default({url:t.url})}),mapLocator:new s.default({map:t.map})}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();l.Options,e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(2)),s=o(n(1)),u=o(n(16)),l=o(n(26)),c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.target));return n.choiceControls=[],n.source=t.source,t.choiceOptions.forEach(function(t){var e=(0,i.default)('<div class="'+a.default.nextId("filter")+'"></div>');t.target=t.target||(0,i.default)('<div class="'+a.default.nextId("filter-chc")+'"></div>'),n.append((0,i.default)(e));var o=new l.default(t);new u.default({target:e,title:t.title,content:o.getContainer()});o.on("change",i.default.proxy(n.filter,n)),n.choiceControls.push(o)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"filter",value:function(){var t={},e=[];this.choiceControls.forEach(function(e){e.val().forEach(function(e){var n=t[e.name]||[];t[e.name]=n.concat(e.values)})}),Object.keys(t).forEach(function(n){e.push({property:n,values:t[n]})}),console.warn(e),this.source.filter(e),this.trigger("change",this)}}]),e}();c.Options,c.ChoiceOptions,e.default=c},function(t){t.exports=ol.Overlay},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(51)),s=o(n(2)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:s.default.nextId("Popup"),element:(0,i.default)(e.HTML).get(0),stopEvent:!0}));return n.margin=[10,10,10,10],n.popup=(0,i.default)(n.getElement()),n.map=t.map,n.setMap(n.map),n.content=n.popup.find(".content"),n.popup.find(".btn-x").on("click tap",i.default.proxy(n.hide,n)),n.popup.on("mouseover mousemove",i.default.proxy(n.hideTip,n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"show",value:function(t){this.setPosition(t.coordinate),t.html&&this.content.html(t.html),this.popup.fadeIn(),(0,i.default)(".f-tip").fadeOut(),this.pan()}},{key:"hide",value:function(){this.popup.fadeOut()}},{key:"hideTip",value:function(t){t.stopPropagation(),(0,i.default)(".f-tip").fadeOut()}},{key:"pan",value:function(){var t=this.popup;if("none"!==t.css("display")){var e=this.map.getView(),n=parseInt(t.css("bottom")),o=-parseInt(t.css("left")),r=this.getOffset(),i=this.map.getPixelFromCoordinate(this.getPosition()),a=this.map.getSize(),s={width:t.width(),height:t.height()+n},u=s.width-o,l=i[0]-o-this.margin[3],c=a[0]-(i[0]+u)-this.margin[1],f=i[1]-s.height+r[1]-this.margin[0],d=a[1]-(i[1]+n)-r[1]-this.margin[2],p=e.getCenter(),h=this.map.getPixelFromCoordinate(p);0>c?h[0]-=c:0>l&&(h[0]+=l),0>f?h[1]+=f:0>d&&(h[1]-=d),e.animate({center:this.map.getCoordinateFromPixel(h)})}}}]),e}();u.ShowOptions,u.Options,u.HTML='<div class="pop"><button class="btn-rnd btn-x"><span class="screen-reader-only">Close</span></button><div class="content"></div></div>',e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(34)),s=o(n(2)),u=o(n(52)),l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.layers=[],n.addLayers(t.layers),n.map.on("click",i.default.proxy(n.mapClick,n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"addLayers",value:function(t){var e=this;t.forEach(function(t){e.addLayer(t)})}},{key:"addLayer",value:function(t){this.layers.push(t),t.set("popup-id",this.getId())}},{key:"showFeature",value:function(t,e){e=e||a.default.getCenter(t.getGeometry().getExtent()),this.show({coordinate:e,html:s.default.html(t)})}},{key:"mapClick",value:function(t){var e=this.getId(),n=this.map.forEachFeatureAtPixel(t.pixel,function(t,n){if(n.get("popup-id")===e)return t});n&&this.showFeature(n,t.coordinate)}}]),e}();l.Options,e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=o(n(40)),s=o(n(39)),u=o(n(38)),l=o(n(15)),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),i(e,[{key:"addToMap",value:function(t,e,n){var o={featureProjection:t.getView().getProjection(),dataProjection:this.customProj(n)};"object"===(void 0===e?"undefined":r(e))&&(e={type:"FeatureCollection",features:e}),e=(new a.default).readFeatures(e,o);var i=new s.default,l=new u.default({source:i});return i.addFeatures(e),t.addLayer(l),l}}]),e}();e.default=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n,o=[],r=!0,i=!1;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);r=!0);}catch(t){i=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw n}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=o(n(0)),s=o(n(2)),u=o(n(17)),l=o(n(54)),c=o(n(77)),f=o(n(76)),d=o(n(75)),p=o(n(74)),h=(o(n(73)),function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t.view instanceof f.default;e.setupView(t);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s.default.mixin(r,[u.default]),r.latestPhoto=0,r.base=null,r.labels={},r.photos={},r.storage=new l.default,r.setupLayers(t,n),r.defaultExtent(o),r.hookupEvents(r.getTargetElement()),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,c.default),i(e,[{key:"showPhoto",value:function(t){this.hidePhoto(),this.photos[(t||this.latestPhoto)+""].setVisible(!0),this.showLabels("photo")}},{key:"hidePhoto",value:function(){this.base.setVisible(!0),this.showLabels(u.default.LabelType.BASE),Object.entries(this.photos).forEach(function(t){var e=r(t,2);e[0];e[1].setVisible(!1)})}},{key:"showLabels",value:function(t){this.labels.base.setVisible(t===u.default.LabelType.BASE),this.labels.photo.setVisible(t===u.default.LabelType.PHOTO)}},{key:"getBaseLayers",value:function(){return{base:this.base,labels:this.labels,photos:this.photos}}},{key:"getStorage",value:function(){return this.storage}},{key:"defaultExtent",value:function(t){t||this.getView().fit(e.EXTENT,this.getSize())}},{key:"setupLayers",value:function(t,n){var o=this;this.base=new p.default({extent:this.layerExtent(e.UNIVERSE_EXTENT,t.view),source:new d.default({url:e.BASE_URL,projection:"EPSG:3857"}),preload:n||0}),this.addLayer(this.base),Object.entries(e.LABEL_URLS).forEach(function(n){var i=r(n,2),a=i[0],s=i[1];o.labels[a]=new p.default({extent:o.layerExtent(e.LABEL_EXTENT,t.view),source:new d.default({url:s,projection:"EPSG:3857"}),zIndex:1e3,visible:"base"==a}),o.addLayer(o.labels[a])}),Object.entries(e.PHOTO_URLS).forEach(function(n){var i=r(n,2),s=i[0],u=i[1],l=new p.default({extent:o.layerExtent(e.PHOTO_EXTENT,t.view),source:new d.default({url:u,projection:"EPSG:3857"}),visible:!1});1*s.split("-")[0]>o.latestPhoto&&(o.latestPhoto=s),l.set("name",s),o.addLayer(l),l.on("change:visible",a.default.proxy(o.photoChange,o)),o.photos[s]=l})}},{key:"layerExtent",value:function(t,e){if(e&&"EPSG:3857"!==e.getProjection().getCode()){var n="EPSG:3857",o="EPSG:2263",r=proj4(n,o,[t[0],t[1]]),i=proj4(n,o,[t[2],t[3]]);return[r[0],r[1],i[0],i[1]]}return t}},{key:"photoChange",value:function(){var t=this,e=!1;Object.entries(this.photos).some(function(n){var o=r(n,2),i=(o[0],o[1]);if(e=i.getVisible())return t.showLabels(u.default.LabelType.PHOTO),!0}),e||this.showLabels(u.default.LabelType.BASE)}}]),e}());h.setupView=function(t){t.view instanceof f.default||(t.view=new f.default({center:h.CENTER,minZoom:8,maxZoom:21,zoom:8,constrainRotation:1}))},h.BASE_URL="https://maps{1-4}.nyc.gov/tms/1.0.0/carto/basemap/{z}/{x}/{-y}.jpg",h.PHOTO_URLS={1924:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/1924/{z}/{x}/{-y}.png8",1951:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/1951/{z}/{x}/{-y}.png8",1996:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/1996/{z}/{x}/{-y}.png8","2001-2":"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2001-2/{z}/{x}/{-y}.png8",2004:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2004/{z}/{x}/{-y}.png8",2006:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2006/{z}/{x}/{-y}.png8",2008:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2008/{z}/{x}/{-y}.png8",2010:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2010/{z}/{x}/{-y}.png8",2012:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2012/{z}/{x}/{-y}.png8",2014:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2014/{z}/{x}/{-y}.png8",2016:"https://maps{1-4}.nyc.gov/tms/1.0.0/photo/2016/{z}/{x}/{-y}.png8"},h.LABEL_URLS={base:"https://maps{1-4}.nyc.gov/tms/1.0.0/carto/label/{z}/{x}/{-y}.png8",photo:"https://maps{1-4}.nyc.gov/tms/1.0.0/carto/label-lt/{z}/{x}/{-y}.png8"},h.UNIVERSE_EXTENT=[-8453323,4774561,-7983695,5165920],h.EXTENT=[-8266522,4937867,-8203781,5000276],h.CENTER=[-8235252,4969073],h.LABEL_EXTENT=[-8268e3,4870900,-8005e3,5055500],h.PHOTO_EXTENT=[-8268357,4937238,-8203099,5001716],e.default=h},,,,,,function(t){t.exports=ol.format.FormatType},function(t){t.exports=window},function(t){t.exports=window.Papa||{}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(63)),a=o(n(62)),s=(o(n(2)),o(n(36))),u=o(n(43)),l=o(n(61)),c=o(n(35)),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.defaultDataProjection=t.defaultDataProjection||"EPSG:4326",n.defaultFeatureProjection=t.defaultFeatureProjection||"EPSG:3857",n.id=t.id,n.x=t.x,n.y=t.y,n.lastId=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"readFeature",value:function(t,e){var n=t[this.id]||this.lastId++,o=t[this.x]=1*t[this.x],r=t[this.y]=1*t[this.y];if(isNaN(o)||isNaN(r))throw"Invalid coordinate ["+o+", "+r+"] for id "+n;var i=new c.default([o,r]),a=new s.default(t);return(e=e||{}).dataProjection=e.dataProjection||this.defaultDataProjection,e.featureProjection=e.featureProjection||this.defaultFeatureProjection,i.transform(e.dataProjection,e.featureProjection),a.setGeometry(i),a.setId(n),a}},{key:"readFeatures",value:function(t,e){var n=this,o=[];return t instanceof ArrayBuffer&&(t=new a.default.TextDecoder("utf-8").decode(t)),"string"==typeof t&&(t=i.default.parse(t,{header:!0}).data),t.forEach(function(t){try{o.push(n.readFeature(t,e))}catch(e){console.error(e,t)}}),o}},{key:"getType",value:function(){return l.default.ARRAY_BUFFER}}]),e}();f.Options,e.default=f},function(t){t.exports=ol.proj.Projection},function(t){t.exports=ol.geom.LineString},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(2)),s=o(n(1)),u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,i.default)(e.HTML)));return t=t||{},(0,i.default)(t.target).append(n.getContainer()),n.current=n.find(".current"),n.total=n.find(".total"),n.currentItem=n.find(".it"),n.btns=n.find(".btns"),n.items=null,n.find(".btn-nxt, .btn-prv").click(i.default.proxy(n.navigate,n)),t.items&&n.show(t.items),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"show",value:function(t){this.items=t,this.btns[1<t.length?"show":"hide"](),this.current.data("current",0).html(1),this.total.html(t.length),this.currentItem.html(t.length?a.default.html(t[0]):""),this.trigger("change",this)}},{key:"navigate",value:function(t){var e=(0,i.default)(t.target).data("incr")-0,n=this.current.data("current")-0+e;0<=n&&n<this.items.length&&(this.current.data("current",n).html(n+1),this.currentItem.html(a.default.html(this.items[n])),this.feature=this.items[n],this.trigger("change",this))}}]),e}();u.Options,u.HTML='<div class="it-pg"><div class="it"></div><div class="btns"><button class="btn-rnd btn-prv" data-incr="-1"><span class="screen-reader-only">Previous</span></button><span class="current"></span> of <span class="total"></span><button class="btn-rnd btn-nxt" data-incr="1"><span class="screen-reader-only">Next</span></button></div></div>',e.default=u},function(t){t.exports=ol.style.Icon},function(t){t.exports=ol.style.Style},function(t){t.exports=ol.coordinate},function(t){t.exports=ol.Geolocation},function(t,e,n){"use strict";(function(t){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=o(n(0)),a=o(n(2)),s=o(n(16)),u=o(n(9)),l=o(n(21)),c=o(n(8)),f=o(n(22)),d=o(n(14)),p=o(n(25)),h=o(n(6)),y=o(n(18)),b=o(n(55)),m=o(n(50)),g=o(n(49)),v=o(n(45)),w=o(n(37)),_=o(n(44)),C=o(n(42)),O=o(n(38)),k=function(){function e(n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),t.finderApp=this,(0,i.default)("body").append(e.HTML).addClass("fnd"),(0,i.default)("#banner").html(n.title),this.pager=new f.default({target:"#facilities"}),this.map=new b.default({target:"map"}),this.source=new C.default({url:n.facilityUrl,format:new _.default({parentFormat:this.parentFomat(n.facilityFormat),decorations:this.decorations(n,n.facilityFormat)})}),this.source.autoLoad().then(i.default.proxy(this.ready,this)),this.layer=new O.default({source:this.source,style:n.facilityStyle}),this.map.addLayer(this.layer),this.popup=new v.default({map:this.map,layers:[this.layer]}),this.location={},new w.default({map:this.map,tips:[{layer:this.layer,label:function(t){return{html:t.getName()}}}]}),this.view=this.map.getView(),this.locationMgr=new g.default({map:this.map,url:n.geoclientUrl}),this.locationMgr.on("geocoded",this.located,this),this.locationMgr.on("geolocated",this.located,this),this.filters=this.createFilters(n.filterChoiceOptions),this.tabs=this.createTabs(n),this.adjustTabs(),this.view.fit(b.default.EXTENT,{size:this.map.getSize(),duration:500}),this.showSplash(n.splashContent),new l.default({target:"#map"}),new y.default({target:"#map",languages:n.languages||h.default.DEFAULT_LANGUAGES,button:!0}),this.directions=null,this.directionsUrl=n.directionsUrl}return r(e,[{key:"zoomTo",value:function(t){var e=this.popup;e.hide(),"none"!==(0,i.default)("h3.btn-0").css("display")&&this.tabs.open("#map"),this.map.once("moveend",function(){e.showFeature(t)}),this.view.animate({center:t.getGeometry().getCoordinates(),zoom:d.default.ZOOM_LEVEL})}},{key:"directionsTo",value:function(t){this.directions=this.directions||new p.default(this.directionsUrl);var e=t.getFullAddress(),n=t.getName(),o=this.origin();this.directions.directions({from:o,to:e,facility:n,origin:this.location,destination:{name:t.getName(),coordinate:t.getGeometry().getCoordinates(),data:{}}})}},{key:"origin",value:function(){var t=this.location;if("geolocation"==t.type){var e=proj4(this.view.getProjection().getCode(),"EPSG:4326",t.coordinate);return[e[1],e[0]]}return t.name||""}},{key:"createFilters",value:function(t){if(t){var e=new m.default({target:"#filters",source:this.source,choiceOptions:t});return e.on("change",this.resetList,this),e}}},{key:"showSplash",value:function(t){t&&(new u.default("splash").ok({message:t,buttonText:["Continue..."]}),(0,i.default)(".dia-msg").attr("tabindex",0).focus())}},{key:"createTabs",value:function(t){var e=[{tab:"#map",title:"Map"},{tab:"#facilities",title:t.facilityTabTitle||"Facilities"}];this.filters&&e.push({tab:"#filters",title:t.filterTabTitle||"Filters"});var n=new c.default({target:"#tabs",tabs:e});return n.on("change",this.resizeMap,this),(0,i.default)(window).resize(i.default.proxy(this.adjustTabs,this)),n}},{key:"adjustTabs",value:function(){1>Math.abs(this.tabs.getContainer().width()-(0,i.default)(window).width())?this.tabs.open("#map"):this.tabs.open("#facilities")}},{key:"resizeMap",value:function(){this.map.setSize([(0,i.default)("#map").width(),(0,i.default)("#map").height()])}},{key:"located",value:function(t){this.location=t,this.resetList()}},{key:"resetList",value:function(t){t instanceof m.default&&(0,i.default)("#tabs .btns h3.btn-2").addClass("filtered");var e=this.location.coordinate;this.popup.hide(),this.pager.reset(e?this.source.sort(e):this.source.getFeatures())}},{key:"parentFomat",value:function(t){return t.parentFomat||t}},{key:"decorations",value:function(t,n){var o=[e.FEATURE_DECORATIONS];return n.parentFomat&&n.parentFomat.decorations&&(o=o.concat(n.parentFomat.decorations)),n.decorations&&(o=o.concat(n.decorations)),t.decorations&&(o=o.concat(t.decorations)),o}},{key:"ready",value:function(t){var e=this.facilitySearchOptions||{};e.features=t,this.pager.reset(t),this.locationMgr.zoomSearch.setFeatures(e),a.default.ready((0,i.default)("body"))}}]),e}();k.handleButton=function(e){var n=(0,i.default)(e.currentTarget),o=n.data("feature");n.hasClass("map")?t.finderApp.zoomTo(o):t.finderApp.directionsTo(o)},k.FEATURE_DECORATIONS={html:function(){return(0,i.default)('<div class="facility"></div>').addClass(this.cssClass()).append(this.distanceHtml()).append(this.nameHtml()).append(this.addressHtml()).append(this.phoneButton()).append(this.emailButton()).append(this.websiteButton()).append(this.mapButton()).append(this.directionsButton())},getName:function(){throw"A getName decoration must be provided"},cssClass:function(){},getAddress1:function(){throw"A getAddress1 decoration must be provided to use default html method and directions"},getAddress2:function(){return""},getCityStateZip:function(){throw"A getCityStateZip decoration must be provided to use default html method and directions"},getFullAddress:function(){return this.getAddress1()+"\n"+this.getAddress2()+",\n"+this.getCityStateZip()},getPhone:function(){},getEmail:function(){},getWebsite:function(){},detailsHtml:function(){},nameHtml:function(){return(0,i.default)('<div class="name notranslate"></div>').html(this.getName())},addressHtml:function(){var t=(0,i.default)('<div class="addr"></div>').append('<div class="ln1">'+this.getAddress1()+"</div>");return this.getAddress2()&&t.append('<div class="ln2">'+this.getAddress2()+"</div>"),t.append('<div class="ln3">'+this.getCityStateZip()+"</div>")},mapButton:function(){return(0,i.default)('<a class="btn rad-all map" role="button">Map</a>').data("feature",this).click(k.handleButton)},directionsButton:function(){return(0,i.default)('<a class="btn rad-all dir" role="button">Directions</a>').data("feature",this).click(k.handleButton)},phoneButton:function(){var t=this.getPhone();if(t)return(0,i.default)('<a class="btn rad-all phone" role="button">'+t+"</a>").attr("href","tel:"+t)},emailButton:function(){var t=this.getEmail();if(t)return(0,i.default)('<a class="btn rad-all email" role="button">Email</a>').attr("href","mailto:"+t)},websiteButton:function(){var t=this.getWebsite();if(t)return(0,i.default)('<a class="btn rad-all web" target="blank" role="button">Website</a>').attr("href",t)},distanceHtml:function(){if(this.getDistance){var t=(0,i.default)('<div class="dist"></div>'),e=this.getDistance();return"ft"===e.units?t.html("&bull; "+(e.distance/5280).toFixed(2)+" mi &bull;"):t.html("&bull; "+(e.distance/1e3).toFixed(2)+" km &bull;")}},detailsCollapsible:function(){var t=this.detailsHtml();if(t)return new s.default({target:(0,i.default)('<div class="details"></div>'),title:"Details...",content:t,collapsed:!0}).getContainer()}},k.Options,k.HTML='<h1 id="banner"></h1><div id="home" onclick="document.location.reload()"></div><div id="map"></div><div id="tabs"></div><div id="facilities"></div><div id="filters"></div>',e.default=k}).call(this,n(5))},function(t){t.exports=ol.geom.Polygon},function(t){t.exports=ol.layer.Tile},function(t){t.exports=ol.source.XYZ},function(t){t.exports=ol.View},function(t){t.exports=ol.Map},function(t){t.exports=ol.tilegrid},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(78)),r={};r.TILE_GRID=o.default.createXYZ({minZoom:8,maxZoom:21}),e.default=r},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}o(n(33));var r=o(n(79)),i=o(n(55)),a=o(n(53)),s=o(n(37)),u=o(n(50)),l=o(n(72)),c=o(n(54)),f=o(n(49)),d=o(n(48)),p=o(n(47)),h=o(n(45)),y=o(n(52)),b=o(n(46)),m=o(n(64)),g=o(n(44)),v=o(n(41)),w=o(n(42));window.nyc.ol=r.default,window.nyc.ol.Basemap=i.default,window.nyc.ol.FeaturePopup=a.default,window.nyc.ol.FeatureTip=s.default,window.nyc.ol.Filters=u.default,window.nyc.ol.FinderApp=l.default,window.nyc.ol.LocalStorage=c.default,window.nyc.ol.LocationMgr=f.default,window.nyc.ol.Locator=d.default,window.nyc.ol.MapLocator=p.default,window.nyc.ol.MultiFeaturePopup=h.default,window.nyc.ol.Popup=y.default,window.nyc.ol.ZoomSearch=b.default,window.nyc.ol.format={},window.nyc.ol.format.CsvPoint=m.default,window.nyc.ol.format.Decorate=g.default,window.nyc.ol.source={},window.nyc.ol.source.AutoLoad=v.default,window.nyc.ol.source.FilterAndSort=w.default}]);